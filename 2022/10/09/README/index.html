

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/logo.png">
  <link rel="icon" href="/img/logo.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="B612🚀">
  <meta name="keywords" content="">
  
    <meta name="description" content="WoniuDoctor介绍第三阶段开发项目,蜗牛医生，小组开发者必须遵守以下开发规范，在仓库创建自己的分支，每个人推送代码仅允许push到自己的分支，严禁push到master，代码日更，记得完成下列附属文件：  Debug日志 Mysql日志 代码进度日志  版本管理规范依赖版本 Git Commit代码提交规范git commit -m “提交注释” 格式说明主要typefeat:     增">
<meta property="og:type" content="article">
<meta property="og:title" content="Le Petit Prince">
<meta property="og:url" content="https://lfrok.top/2022/10/09/README/index.html">
<meta property="og:site_name" content="Le Petit Prince">
<meta property="og:description" content="WoniuDoctor介绍第三阶段开发项目,蜗牛医生，小组开发者必须遵守以下开发规范，在仓库创建自己的分支，每个人推送代码仅允许push到自己的分支，严禁push到master，代码日更，记得完成下列附属文件：  Debug日志 Mysql日志 代码进度日志  版本管理规范依赖版本 Git Commit代码提交规范git commit -m “提交注释” 格式说明主要typefeat:     增">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-10-09T07:12:42.287Z">
<meta property="article:modified_time" content="2022-10-10T02:34:55.040Z">
<meta property="article:author" content="B612🚀">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>Le Petit Prince</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"lfrok.top","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  

  

  



  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>B-612</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/same/">
                <i class="iconfont icon-twitch-fill"></i>
                我们
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://pprince.top/bgc/bgc-2.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text=""></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-10-09 15:12" pubdate>
          2022年10月9日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          19k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          158 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none"></h1>
            
            
              <div class="markdown-body">
                
                <h1 id="WoniuDoctor"><a href="#WoniuDoctor" class="headerlink" title="WoniuDoctor"></a>WoniuDoctor</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>第三阶段开发项目,<strong>蜗牛医生</strong>，小组开发者必须遵守以下开发规范，在仓库创建自己的分支，每个人推送代码仅允许push到自己的分支，严禁push到master，代码日更，记得完成下列附属文件：</p>
<ul>
<li>Debug日志</li>
<li>Mysql日志</li>
<li>代码进度日志</li>
</ul>
<h2 id="版本管理规范"><a href="#版本管理规范" class="headerlink" title="版本管理规范"></a>版本管理规范</h2><p>依赖版本</p>
<h2 id="Git-Commit代码提交规范"><a href="#Git-Commit代码提交规范" class="headerlink" title="Git Commit代码提交规范"></a>Git Commit代码提交规范</h2><p>git commit -m “提交注释”</p>
<h3 id="格式说明"><a href="#格式说明" class="headerlink" title="格式说明"></a>格式说明</h3><h3 id="主要type"><a href="#主要type" class="headerlink" title="主要type"></a>主要type</h3><p>feat:     增加新功能<br>fix:      修复bug</p>
<h3 id="特殊type"><a href="#特殊type" class="headerlink" title="特殊type"></a>特殊type</h3><p>docs:     只改动了文档相关的内容<br>style:    不影响代码含义的改动，例如去掉空格、改变缩进、增删分号<br>build:    构造工具的或者外部依赖的改动，例如webpack，npm<br>refactor: 代码重构时使用,重构（即不是新增功能，也不是修改bug的代码变动）<br>revert:   执行git revert打印的message</p>
<h3 id="暂不使用type"><a href="#暂不使用type" class="headerlink" title="暂不使用type"></a>暂不使用type</h3><p>test:     添加测试或者修改现有测试<br>perf:     提高性能的改动<br>ci:       与CI（持续集成服务）有关的改动<br>chore:    不修改src或者test的其余修改，例如构建过程或辅助工具的变动</p>
<h2 id="分支管理规范"><a href="#分支管理规范" class="headerlink" title="分支管理规范"></a>分支管理规范</h2><p>远程仓库只允许出现五种类型的分支：</p>
<ul>
<li><strong>主分支</strong>：项目的主要分支也就是master分支。用于正式发布，该分支禁止任何人直接提交，提交合并请求由对应项目主管人员确认合并。</li>
<li><strong>开发分支</strong>：项目的开发迭代分支，用于开发发布，常规开发任务的代码直接提交至该分支或者由临时分支合并至该分支。</li>
<li><strong>测试分支</strong>：项目的测试迭代分支，用户测试发布，该分支禁止任何人直接提交，提交合并请求由对应项目主管人员确认合并。</li>
<li><strong>归档分支</strong>：项目的里程碑版本保留分支，由测试负责人、项目负责人、产品负责人直接定义版本，从测试分支归档出新分支。</li>
<li><strong>临时分支</strong>：由项目的开发人员建立的临时分支，禁止交叉提交，谁建立的分支便由谁负责管理，用于合并至开发分支，合并完成之后禁止新提交应当立刻删除。</li>
</ul>
<h4 id="主分支"><a href="#主分支" class="headerlink" title="主分支"></a>主分支</h4><p>主分支全局仓库唯一，分支名称固定为<strong>master</strong>，任何对主分支的直接提交定性为严重违规行为，需要尝试对主分支进行合并应当由对应仓库的开发负责人提交合并请求并由上级负责人通过合并实现对主分支的变更。</p>
<h4 id="开发分支"><a href="#开发分支" class="headerlink" title="开发分支"></a>开发分支</h4><p>开发分支全局仓库唯一，分支名称固定为<strong>devLoop</strong>，开发人员允许对该分支直接提交，任何向开发分支提交的代码在提交之前应当保证能够正常通过编译、部署并运行，无法部署的提交应当立刻修复并重新提交。开发分支部署的代码应当由开发人员完成所有的单元测试，全部通过之后再向测试分支提交。</p>
<h4 id="测试分支"><a href="#测试分支" class="headerlink" title="测试分支"></a>测试分支</h4><p>测试分支全局仓库唯一，分支名称固定为<strong>testLooop</strong>，禁止直接对该分支提交，测试分支应当由开发分支提交合并请求而来，由开发人员提交合并请求，由主要开发人员通过合并请求实现测试部署。小型项目、中间件研发可以酌情省略测试分支，由开发分支部署交于测试进行质量校验，大型项目或产品必须保证有测试分支。</p>
<h4 id="归档分支"><a href="#归档分支" class="headerlink" title="归档分支"></a>归档分支</h4><p>归档分支全局仓管可以具备多个，直接由测试分支或主分支派生，除特殊情况下禁止任何提交行为，归档分支名称格式为<strong>release-版本号</strong>（如：<code>release-1.2.0</code>），分支由对应项目的开发主要负责人再与测试负责人沟通之后创建，已经后续无论是BUG、还是功能性问题都不应当项归档分支提交。</p>
<h4 id="临时分支"><a href="#临时分支" class="headerlink" title="临时分支"></a>临时分支</h4><p>临时分支全局仓库可以具备多个，临时分支名称格式为<strong>tem-开发者-创建时间</strong>（如：<code>tem-tangyuecan-20200724</code>），由开发人员自行创建，临时分支的提交进制交叉提交，只允许分支创建者提交，临时分支只能合并到开发分支一旦完成合并之后应当立即删除，可以直接本地合并之后向开发分支提交或者提交合并请求由开发负责人进行合并，临时分支的生命周期原则上不超过三个工作日。临时分支主要用于无法在短时间之内完成的开发工作，或者整合至开发分支之后无法运行情况，这样考虑之下才有临时分支的概念。</p>
<h4 id="提交描述"><a href="#提交描述" class="headerlink" title="提交描述"></a>提交描述</h4><p>所以代码的提交、合并都应该通过文字目前描述出改此提交、合并的目的如下面几种：</p>
<ul>
<li><code>修复问题：#xxxx</code>（禅道BUG的ID或者ISSUE）</li>
<li><code>修复问题：xxxx</code>（BUG的名称）</li>
<li><code>完成功能：#xxxx</code>（禅道的任务ID）</li>
<li><code>完成功能：xxxxx</code>（功能的名称）</li>
</ul>
<p>任何无意义或者具体目的的提交禁止同步至远程仓库，包括远程临时分支（禁止commit）</p>
<h2 id="Java中的命名规范"><a href="#Java中的命名规范" class="headerlink" title="Java中的命名规范"></a>Java中的命名规范</h2><table>
<thead>
<tr>
<th align="left">类型</th>
<th align="left">约束</th>
<th align="center">例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">项目名</td>
<td align="left">全部小写，多个单词用中划线分隔‘-’</td>
<td align="center">spring-cloud</td>
</tr>
<tr>
<td align="left">包名</td>
<td align="left">全部小写</td>
<td align="center">com.alibaba.fastjson</td>
</tr>
<tr>
<td align="left">类名</td>
<td align="left">单词首字母大写</td>
<td align="center">Feature, ParserConfig,DefaultFieldDeserializer</td>
</tr>
<tr>
<td align="left">变量名</td>
<td align="left">首字母小写，多个单词组成时，除首个单词，其他单词首字母都要大写</td>
<td align="center">password, userName</td>
</tr>
<tr>
<td align="left">常量名</td>
<td align="left">全部大写，多个单词，用’_’分隔</td>
<td align="center">CACHE_EXPIRED_TIME</td>
</tr>
<tr>
<td align="left">方法</td>
<td align="left">同变量</td>
<td align="center">read(), readObject(), getById()</td>
</tr>
</tbody></table>
<h3 id="包命名"><a href="#包命名" class="headerlink" title="包命名"></a>包命名</h3><table>
<thead>
<tr>
<th align="left">前缀名</th>
<th align="left">例</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">indi（或onem ）</td>
<td align="left">indi.发起者名.项目名.模块名.……</td>
<td align="center">个体项目，指个人发起，但非自己独自完成的项目，可公开或私有项目，copyright主要属于发起者。</td>
</tr>
<tr>
<td align="left">pers</td>
<td align="left">pers.个人名.项目名.模块名.……</td>
<td align="center">个人项目，指个人发起，独自完成，可分享的项目，copyright主要属于个人</td>
</tr>
<tr>
<td align="left">priv</td>
<td align="left">priv.个人名.项目名.模块名.……</td>
<td align="center">私有项目，指个人发起，独自完成，非公开的私人使用的项目，copyright属于个人。</td>
</tr>
<tr>
<td align="left">team</td>
<td align="left">team.团队名.项目名.模块名.……</td>
<td align="center">团队项目，指由团队发起，并由该团队开发的项目，copyright属于该团队所有</td>
</tr>
<tr>
<td align="left">顶级域名</td>
<td align="left">com.公司名.项目名.模块名.……</td>
<td align="center">公司项目，copyright由项目发起的公司所有</td>
</tr>
</tbody></table>
<h3 id="类命名"><a href="#类命名" class="headerlink" title="类命名"></a>类命名</h3><table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">约束</th>
<th align="center">例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">抽象类</td>
<td align="left">Abstract 或者 Base 开头</td>
<td align="center">BaseUserService</td>
</tr>
<tr>
<td align="left">枚举类</td>
<td align="left">Enum 作为后缀</td>
<td align="center">GenderEnum</td>
</tr>
<tr>
<td align="left">工具类</td>
<td align="left">Utils作为后缀</td>
<td align="center">StringUtils</td>
</tr>
<tr>
<td align="left">异常类</td>
<td align="left">Exception结尾</td>
<td align="center">RuntimeException</td>
</tr>
<tr>
<td align="left">接口实现类</td>
<td align="left">接口名+ Impl</td>
<td align="center">UserServiceImpl</td>
</tr>
<tr>
<td align="left">领域模型相关</td>
<td align="left">&#x2F;DO&#x2F;DTO&#x2F;VO&#x2F;DAO</td>
<td align="center">正例：UserDAO 反例： UserDo， UserDao</td>
</tr>
<tr>
<td align="left">设计模式相关类</td>
<td align="left">Builder，Factory等</td>
<td align="center">当使用到设计模式时，需要使用对应的设计模式作为后缀，如ThreadFactory</td>
</tr>
<tr>
<td align="left">处理特定功能的</td>
<td align="left">Handler，Predicate, Validator</td>
<td align="center">表示处理器，校验器，断言，这些类工厂还有配套的方法名如handle，predicate，validate</td>
</tr>
<tr>
<td align="left">测试类</td>
<td align="left">Test结尾</td>
<td align="center">UserServiceTest， 表示用来测试UserService类的</td>
</tr>
<tr>
<td align="left">MVC分层</td>
<td align="left">Controller，Service，ServiceImpl，DAO后缀</td>
<td align="center">UserManageController，UserManageDAO</td>
</tr>
</tbody></table>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><table>
<thead>
<tr>
<th align="left">位置</th>
<th align="left">单词</th>
<th align="left">意义</th>
<th align="center">例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Prefix</td>
<td align="left">is</td>
<td align="left">对象是否符合期待的状态</td>
<td align="center">isValid</td>
</tr>
<tr>
<td align="left">Prefix</td>
<td align="left">can</td>
<td align="left">对象能否执行所期待的动作</td>
<td align="center">canRemove</td>
</tr>
<tr>
<td align="left">Prefix</td>
<td align="left">should</td>
<td align="left">调用方执行某个命令或方法是好还是不好,应不应该，或者说推荐还是不推荐</td>
<td align="center">shouldMigrate</td>
</tr>
<tr>
<td align="left">Prefix</td>
<td align="left">has</td>
<td align="left">对象是否持有所期待的数据和属性</td>
<td align="center">hasObservers</td>
</tr>
<tr>
<td align="left">Prefix</td>
<td align="left">needs</td>
<td align="left">调用方是否需要执行某个命令或方法</td>
<td align="center">needsMigrate</td>
</tr>
</tbody></table>
<h3 id="变量-amp-常量命名"><a href="#变量-amp-常量命名" class="headerlink" title="变量&amp;常量命名"></a>变量&amp;常量命名</h3><p>变量使用驼峰命名法</p>
<p>常量名必须大写</p>
<h3 id="通用命名规则"><a href="#通用命名规则" class="headerlink" title="通用命名规则"></a>通用命名规则</h3><ol>
<li>尽量不要使用拼音；杜绝拼音和英文混用。对于一些通用的表示或者难以用英文描述的可以采用拼音，一旦采用拼音就坚决不能和英文混用。 正例： BeiJing， HangZhou 反例： validateCanShu</li>
<li>命名过程中尽量不要出现特殊的字符，常量除外。</li>
<li>尽量不要和jdk或者框架中已存在的类重名，也不能使用java中的关键字命名。</li>
<li>妙用介词，如for(可以用同音的4代替), to(可用同音的2代替), from, with，of等。 如类名采用User4RedisDO，方法名getUserInfoFromRedis，convertJson2Map等。</li>
</ol>
<h2 id="继承结构及工程规范"><a href="#继承结构及工程规范" class="headerlink" title="继承结构及工程规范"></a>继承结构及工程规范</h2><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th align="center"></th>
</tr>
</thead>
<tbody><tr>
<td>模块名称</td>
<td>模块说明xxxx<br/><br/>xxxx<br/><br/>xxxx<br/><br/>使用说明<br/>xxxx<br/><br/>xxxx<br/><br/>xxxx</td>
<td>示例</td>
<td align="center">备注</td>
</tr>
<tr>
<td>entity层</td>
<td>实体类命名与表名相同，首字母大写，如果表名存在_那么将_这去掉后首字母大写。</td>
<td>表名:like_log 实体名 LikeLog</td>
<td align="center"><strong>实体类属性必须与数据库字段名保持一致。</strong></td>
</tr>
<tr>
<td>mapper层</td>
<td>继承com.baomidou.mybatisplus.core.mapper.BaseMapper 要求实体泛型dao层下接口命名：实体名+Mapper 。</td>
<td>LikeLogMapper</td>
<td align="center"></td>
</tr>
<tr>
<td>service层</td>
<td>要求：接口继承com.baomidou.mybatisplus.extension.service.IService要求实体泛型</td>
<td></td>
<td align="center"></td>
</tr>
<tr>
<td>service.impl层类</td>
<td>继承com.baomidou.mybatisplus.extension.service.impl.ServiceImpl，service层下接口命名：业务名称+Service 。service.impl层命名：　业务名称+ServiceImpl 。xxxx<br/><br/>xxxx<br/><br/>xxxx<br/><br/>使用说明<br/>xxxx<br/><br/>xxxx<br/><br/>xxxx</td>
<td>LikeLogService；LikeLogServiceImpl</td>
<td align="center">service层可以调用service层和dao层和其他项目。 service层下可再包一层bean层，用以存放数据结构的类，必须以Bean结尾。 平台service层内部调用的方法可以返回entity，但是被manage层调用的service方法只能返回dto或基本数据类型，不能返回entity到manage。</td>
</tr>
<tr>
<td>manage层</td>
<td>调用其他服务的接口，通常使用Feign来实现</td>
<td>ILikeLogMange</td>
<td align="center">manage层下接口命名：I+业务名称+Manage。</td>
</tr>
<tr>
<td>controller层</td>
<td>继承: org.jeecg.common.system.base.controller.JeecgController&lt;T, S extends IService&gt;controller层命名：以Controller结尾。</td>
<td>LikeLogController</td>
<td align="center">web&#x2F;proxy&#x2F;internal可用；<strong>controller层不能出现dto</strong></td>
</tr>
<tr>
<td>form层</td>
<td>web&#x2F;proxy&#x2F;internal可用；form下类命名：以Form结尾。</td>
<td>LikeBaseInfoForm</td>
<td align="center">form可以引用其他form form中不可以包含dto</td>
</tr>
<tr>
<td>vo层</td>
<td>internal&#x2F;platform 可用；vo层命名：以vo结尾，前缀不一定是entity。</td>
<td>LikeLogDto</td>
<td align="center">dto不能引用别人的dto</td>
</tr>
<tr>
<td>schedule类</td>
<td>schedule层命名: 以业务名称开头，以Schedule结尾，前缀不一定是entity。</td>
<td>SendEmailSchedule</td>
<td align="center"></td>
</tr>
<tr>
<td>Idp类</td>
<td>idp层命名：以IdpHandler结尾。</td>
<td>ResumeIdpHandler</td>
<td align="center"></td>
</tr>
<tr>
<td>util层</td>
<td>util层命名：以Util或Utils结尾。</td>
<td>MoneyUtil</td>
<td align="center"></td>
</tr>
<tr>
<td>consts层</td>
<td>静态变量类consts层命名：以Const结尾。</td>
<td>LikeLogConst</td>
<td align="center"></td>
</tr>
<tr>
<td>helper层</td>
<td>helper层命名：client名+Helper结尾。</td>
<td>UserPlatformClientHelper</td>
<td align="center">Helper层主要放置调用其它端client的工具类； Helper只可以出现调平台的代码和处理平台返回错误的代码； Helper不允许调其他helper；</td>
</tr>
<tr>
<td>filter</td>
<td>filter命名：以Filter结尾。</td>
<td>AuthFilter</td>
<td align="center">只能出现在common包下面的filter包中</td>
</tr>
<tr>
<td>resolver</td>
<td>包名只能叫resolver且同一工程下只能有一个resolve包，只能出现在common包下的resolver包中，此包下只能有一个类文件且名称为：MvcExceptionResolver。</td>
<td></td>
<td align="center"></td>
</tr>
</tbody></table>
<h2 id="Web-URL标准"><a href="#Web-URL标准" class="headerlink" title="Web URL标准"></a>Web URL标准</h2><h2 id="Ajax返回数据规范"><a href="#Ajax返回数据规范" class="headerlink" title="Ajax返回数据规范"></a>Ajax返回数据规范</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 正常返回</span><br>&#123;<br>  <span class="hljs-string">&quot;flag&quot;</span>: <span class="hljs-number">1</span>,    <span class="hljs-comment">// 数据状态标识</span><br>  <span class="hljs-string">&quot;data&quot;</span>: &#123;     <span class="hljs-comment">// 正常返回的相关数据，可以是 Object / Array</span><br>    ...<br>  &#125;<br>&#125;<br><span class="hljs-comment">// 异常返回</span><br>&#123;<br>  <span class="hljs-string">&quot;flag&quot;</span>: <span class="hljs-number">0</span>,    <span class="hljs-comment">// 数据状态标识</span><br>  <span class="hljs-string">&quot;code&quot;</span>: <span class="hljs-string">&quot;***&quot;</span>,    <span class="hljs-comment">// 异常标识code</span><br>  <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;some error message.&quot;</span>    <span class="hljs-comment">// 异常提示信息</span><br>&#125;<br><br></code></pre></td></tr></table></figure>



<h2 id="数据库设计规范"><a href="#数据库设计规范" class="headerlink" title="数据库设计规范"></a>数据库设计规范</h2><h2 id="数据库命令规范"><a href="#数据库命令规范" class="headerlink" title="数据库命令规范"></a>数据库命令规范</h2><p>1、所有数据库对象名称必须使用小写字母并用下划线分割</p>
<p>2、所有数据库对象名称禁止使用mysql保留关键字（如果表名中包含关键字查询时，需要将其用单引号括起来）</p>
<p>3、数据库对象的命名要能做到见名识意，并且最后不要超过32个字符</p>
<p>4、临时库表必须以tmp_为前缀并以日期为后缀，备份表必须以bak_为前缀并以日期(时间戳)为后缀</p>
<p>5、所有存储相同数据的列名和列类型必须一致（一般作为关联列，如果查询时关联列类型不一致会自动进行数据类型隐式转换，会造成列上的索引失效，导致查询效率降低）</p>
<h3 id="数据库命名规范"><a href="#数据库命名规范" class="headerlink" title="数据库命名规范"></a>数据库命名规范</h3><p>采用小写字母、数字（通常不需要）和下划线组成。禁止使用’-’，命名简洁、含义明确。</p>
<h3 id="表命名"><a href="#表命名" class="headerlink" title="表命名"></a>表命名</h3><ul>
<li><p>根据业务类型不同，采用不同的前缀，小写字母、下划线组成</p>
</li>
<li><p>长度控制在30个字符以内</p>
<p>推荐的命名规则</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>前缀</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>业务表</td>
<td>tb_</td>
<td></td>
</tr>
<tr>
<td>关系表</td>
<td>tr_</td>
<td></td>
</tr>
<tr>
<td>历史表</td>
<td>th_</td>
<td></td>
</tr>
<tr>
<td>统计表</td>
<td>ts_</td>
<td></td>
</tr>
<tr>
<td>日志表</td>
<td>tl_xx_log</td>
<td></td>
</tr>
<tr>
<td>系统表、字典表、码表</td>
<td>sys_</td>
<td></td>
</tr>
<tr>
<td>临时表</td>
<td>tmp_</td>
<td>禁止使用</td>
</tr>
<tr>
<td>备份表</td>
<td>bak_xx_ymd</td>
<td></td>
</tr>
<tr>
<td>视图</td>
<td>view_</td>
<td>避免使用</td>
</tr>
</tbody></table>
</li>
</ul>
<h2 id="数据库基本设计规范"><a href="#数据库基本设计规范" class="headerlink" title="数据库基本设计规范"></a>数据库基本设计规范</h2><h3 id="所有表必须使用Innodb存储引擎"><a href="#所有表必须使用Innodb存储引擎" class="headerlink" title="所有表必须使用Innodb存储引擎"></a>所有表必须使用Innodb存储引擎</h3><p>没有特殊要求（即Innodb无法满足的功能如：列存储，存储空间数据等）的情况下，所有表必须使用Innodb存储引擎（mysql5.5之前默认使用Myisam，5.6以后默认的为Innodb）Innodb 支持事务，支持行级锁，更好的恢复性，高并发下性能更好。</p>
<h3 id="数据库和表的字符集统一使用utf8mb4"><a href="#数据库和表的字符集统一使用utf8mb4" class="headerlink" title="数据库和表的字符集统一使用utf8mb4"></a>数据库和表的字符集统一使用utf8mb4</h3><p>兼容性更好，统一字符集可以避免由于字符集转换产生的乱码，不同的字符集进行比较前需要进行转换会造成索引失效。</p>
<ul>
<li>解读：在Mysql中的UTF-8并非“真正的UTF-8”，而utf8mb4”才是真正的“UTF-8”。</li>
</ul>
<h3 id="所有表和字段都需要添加注释"><a href="#所有表和字段都需要添加注释" class="headerlink" title="所有表和字段都需要添加注释"></a>所有表和字段都需要添加注释</h3><p>使用comment从句添加表和列的备注 从一开始就进行数据字典的维护</p>
<h3 id="尽量控制单表数据量的大小，建议控制在500万以内"><a href="#尽量控制单表数据量的大小，建议控制在500万以内" class="headerlink" title="尽量控制单表数据量的大小，建议控制在500万以内"></a>尽量控制单表数据量的大小，建议控制在500万以内</h3><p>500万并不是MySQL数据库的限制，过大会造成修改表结构，备份，恢复都会有很大的问题</p>
<p>可以用历史数据归档（应用于日志数据），分库分表（应用于业务数据）等手段来控制数据量大小。</p>
<h3 id="谨慎使用MySQL分区表"><a href="#谨慎使用MySQL分区表" class="headerlink" title="谨慎使用MySQL分区表"></a>谨慎使用MySQL分区表</h3><p>分区表在物理上表现为多个文件，在逻辑上表现为一个表 谨慎选择分区键，跨分区查询效率可能更低 建议采用物理分表的方式管理大数据</p>
<h3 id="尽量做到冷热数据分离，减小表的宽度"><a href="#尽量做到冷热数据分离，减小表的宽度" class="headerlink" title="尽量做到冷热数据分离，减小表的宽度"></a>尽量做到冷热数据分离，减小表的宽度</h3><p>MySQL限制每个表最多存储4096列，并且每一行数据的大小不能超过65535字节 减少磁盘IO,保证热数据的内存缓存命中率（表越宽，把表装载进内存缓冲池时所占用的内存也就越大,也会消耗更多的IO） 更有效的利用缓存，避免读入无用的冷数据 经常一起使用的列放到一个表中（避免更多的关联操作）</p>
<h3 id="禁止在表中建立预留字段"><a href="#禁止在表中建立预留字段" class="headerlink" title="禁止在表中建立预留字段"></a>禁止在表中建立预留字段</h3><p>预留字段的命名很难做到见名识义 预留字段无法确认存储的数据类型，所以无法选择合适的类型 对预留字段类型的修改，会对表进行锁定</p>
<h3 id="禁止在数据库中存储图片，文件等大的二进制数据"><a href="#禁止在数据库中存储图片，文件等大的二进制数据" class="headerlink" title="禁止在数据库中存储图片，文件等大的二进制数据"></a>禁止在数据库中存储图片，文件等大的二进制数据</h3><p>通常文件很大，会短时间内造成数据量快速增长，数据库进行数据库读取时，通常会进行大量的随机IO操作，文件很大时，IO操作很耗时 通常存储于文件服务器，数据库只存储文件地址信息</p>
<h3 id="每张表必须设置一个主键ID，且这个主键ID使用自增主键（在满足需要的情况下尽量短），除非在分库分表环境下"><a href="#每张表必须设置一个主键ID，且这个主键ID使用自增主键（在满足需要的情况下尽量短），除非在分库分表环境下" class="headerlink" title="每张表必须设置一个主键ID，且这个主键ID使用自增主键（在满足需要的情况下尽量短），除非在分库分表环境下"></a>每张表必须设置一个主键ID，且这个主键ID使用自增主键（在满足需要的情况下尽量短），除非在分库分表环境下</h3><ul>
<li>解读：由于InnoDB组织数据的方式决定了需要有一个主键，而且若是这个主键ID是单调递增的可以有效提高插入的性能，避免过多的页分裂、减少表碎片提高空间的使用率。 而在分库分表环境下，则需要统一来分配各个表中的主键值，从而避免整个逻辑表中主键重复。</li>
</ul>
<h3 id="禁止使用外键，如果有外键完整性约束，需要应用程序控制"><a href="#禁止使用外键，如果有外键完整性约束，需要应用程序控制" class="headerlink" title="禁止使用外键，如果有外键完整性约束，需要应用程序控制"></a>禁止使用外键，如果有外键完整性约束，需要应用程序控制</h3><ul>
<li>解读：外键会导致表与表之间耦合，UPDATE与DELETE操作都会涉及相关联的表，十分影响SQL的性能，甚至会造成死锁。</li>
</ul>
<h3 id="单表列数目必须小于30，若超过则应该考虑将表拆分"><a href="#单表列数目必须小于30，若超过则应该考虑将表拆分" class="headerlink" title="单表列数目必须小于30，若超过则应该考虑将表拆分"></a>单表列数目必须小于30，若超过则应该考虑将表拆分</h3><ul>
<li>解读：单表列数太多使得Mysql服务器处理InnoDB返回数据之间的映射成本太高。</li>
</ul>
<h3 id="禁止在线上做数据库压力测试"><a href="#禁止在线上做数据库压力测试" class="headerlink" title="禁止在线上做数据库压力测试"></a>禁止在线上做数据库压力测试</h3><h3 id="禁止从开发环境，测试环境直接连接生成环境数据库"><a href="#禁止从开发环境，测试环境直接连接生成环境数据库" class="headerlink" title="禁止从开发环境，测试环境直接连接生成环境数据库"></a>禁止从开发环境，测试环境直接连接生成环境数据库</h3><h2 id="数据库字段设计规范"><a href="#数据库字段设计规范" class="headerlink" title="数据库字段设计规范"></a>数据库字段设计规范</h2><h3 id="优先选择符合存储需要的最小的数据类型"><a href="#优先选择符合存储需要的最小的数据类型" class="headerlink" title="优先选择符合存储需要的最小的数据类型"></a>优先选择符合存储需要的最小的数据类型</h3><p>原因</p>
<p>列的字段越大，建立索引时所需要的空间也就越大，这样一页中所能存储的索引节点的数量也就越少也越少，在遍历时所需要的IO次数也就越多， 索引的性能也就越差</p>
<p>方法</p>
<p>1）将字符串转换成数字类型存储，如：将IP地址转换成整形数据。</p>
<p>mysql提供了两个方法来处理ip地址：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">inet_aton 把ip转为无符号整型(<span class="hljs-number">4</span><span class="hljs-number">-8</span>位)<br>inet_ntoa 把整型的ip转为地址<br></code></pre></td></tr></table></figure>

<p>插入数据前，先用inet_aton把ip地址转为整型，可以节省空间。显示数据时，使用inet_ntoa把整型的ip地址转为地址显示即可。</p>
<p>2）对于非负型的数据（如自增ID、整型IP）来说，要优先使用无符号整型来存储</p>
<p>因为：无符号相对于有符号可以多出一倍的存储空间</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">SIGNED <span class="hljs-type">INT</span> <span class="hljs-number">-2147483648</span><span class="hljs-operator">~</span><span class="hljs-number">2147483647</span><br><br>UNSIGNED <span class="hljs-type">INT</span> <span class="hljs-number">0</span><span class="hljs-operator">~</span><span class="hljs-number">4294967295</span><br></code></pre></td></tr></table></figure>

<p>VARCHAR(N)中的N代表的是字符数，而不是字节数</p>
<p>使用UTF8存储255个汉字 Varchar(255)&#x3D;765个字节。过大的长度会消耗更多的内存</p>
<h3 id="避免使用TEXT、BLOB数据类型，最常见的TEXT类型可以存储64k的数据"><a href="#避免使用TEXT、BLOB数据类型，最常见的TEXT类型可以存储64k的数据" class="headerlink" title="避免使用TEXT、BLOB数据类型，最常见的TEXT类型可以存储64k的数据"></a>避免使用TEXT、BLOB数据类型，最常见的TEXT类型可以存储64k的数据</h3><p>建议把BLOB或是TEXT列分离到单独的扩展表中</p>
<p>Mysql内存临时表不支持TEXT、BLOB这样的大数据类型，如果查询中包含这样的数据，在排序等操作时，就不能使用内存临时表，必须使用磁盘临时表进行。</p>
<p>而且对于这种数据，Mysql还是要进行二次查询，会使sql性能变得很差，但是不是说一定不能使用这样的数据类型。</p>
<p>如果一定要使用，建议把BLOB或是TEXT列分离到单独的扩展表中，查询时一定不要使用select * 而只需要取出必要的列，不需要TEXT列的数据时不要对该列进行查询。</p>
<p>TEXT或BLOB类型只能使用前缀索引</p>
<p>因为MySQL对索引字段长度是有限制的，所以TEXT类型只能使用前缀索引，并且TEXT列上是不能有默认值的。</p>
<h3 id="避免使用ENUM类型"><a href="#避免使用ENUM类型" class="headerlink" title="避免使用ENUM类型"></a>避免使用ENUM类型</h3><p>1、修改ENUM值需要使用ALTER语句</p>
<p>2、ENUM类型的ORDER BY操作效率低，需要额外操作</p>
<p>3、禁止使用数值作为ENUM的枚举值</p>
<h3 id="必须把字段定义为NOT-NULL并且提供默认值"><a href="#必须把字段定义为NOT-NULL并且提供默认值" class="headerlink" title="必须把字段定义为NOT NULL并且提供默认值"></a>必须把字段定义为NOT NULL并且提供默认值</h3><p>原因：</p>
<p>1、索引NULL列需要额外的空间来保存，所以要占用更多的空间；</p>
<p>2、进行比较和计算时要对NULL值做特别的处理</p>
<ul>
<li>解读：</li>
<li>NULL的列使索引&#x2F;索引统计&#x2F;值比较都更加复杂，对MySQL来说更难优化；</li>
<li>NULL这种类型Msql内部需要进行特殊处理，增加数据库处理记录的复杂性；同等条件下，表中有较多空字段的时候，数据库的处理性能会降低很多；</li>
<li>NULL值需要更多的存储空，无论是表还是索引中每行中的NULL的列都需要额外的空间来标识。</li>
</ul>
<h3 id="使用TIMESTAMP（4个字节）或DATETIME类型（8个字节）存储时间"><a href="#使用TIMESTAMP（4个字节）或DATETIME类型（8个字节）存储时间" class="headerlink" title="使用TIMESTAMP（4个字节）或DATETIME类型（8个字节）存储时间"></a>使用TIMESTAMP（4个字节）或DATETIME类型（8个字节）存储时间</h3><p>TIMESTAMP 存储的时间范围 1970-01-01 00:00:01 ~ 2038-01-19-03:14:07。</p>
<p>TIMESTAMP 占用4字节和INT相同，但比INT可读性高</p>
<p>超出TIMESTAMP取值范围的使用DATETIME类型存储。</p>
<p>经常会有人用字符串存储日期型的数据（不正确的做法）：</p>
<p>缺点1：无法用日期函数进行计算和比较</p>
<p>缺点2：用字符串存储日期要占用更多的空间</p>
<h3 id="同财务相关的金额类数据必须使用decimal类型"><a href="#同财务相关的金额类数据必须使用decimal类型" class="headerlink" title="同财务相关的金额类数据必须使用decimal类型"></a>同财务相关的金额类数据必须使用decimal类型</h3><p>1、非精准浮点：float,double</p>
<p>2、精准浮点：decimal</p>
<p>Decimal类型为精准浮点数，在计算时不会丢失精度。占用空间由定义的宽度决定，每4个字节可以存储9位数字，并且小数点要占用一个字节。可用于存储比bigint更大的整型数据。</p>
<h3 id="如果存储的字符串长度几乎相等，使用CHAR定长字符串类型。"><a href="#如果存储的字符串长度几乎相等，使用CHAR定长字符串类型。" class="headerlink" title="如果存储的字符串长度几乎相等，使用CHAR定长字符串类型。"></a>如果存储的字符串长度几乎相等，使用CHAR定长字符串类型。</h3><ul>
<li>解读：能够减少空间碎片，节省存储空间。</li>
</ul>
<h3 id="禁用保留字，如DESC、RANGE、MARCH等，请参考Mysql官方保留字"><a href="#禁用保留字，如DESC、RANGE、MARCH等，请参考Mysql官方保留字" class="headerlink" title="禁用保留字，如DESC、RANGE、MARCH等，请参考Mysql官方保留字"></a>禁用保留字，如DESC、RANGE、MARCH等，请参考Mysql官方保留字</h3><h2 id="索引设计规范"><a href="#索引设计规范" class="headerlink" title="索引设计规范"></a>索引设计规范</h2><h3 id="4-4-1-限制每张表上的索引数量，建议单张表索引不超过5个"><a href="#4-4-1-限制每张表上的索引数量，建议单张表索引不超过5个" class="headerlink" title="4.4.1 限制每张表上的索引数量，建议单张表索引不超过5个"></a>4.4.1 限制每张表上的索引数量，建议单张表索引不超过5个</h3><p>索引并不是越多越好！索引可以提高效率同样可以降低效率。</p>
<p>索引可以增加查询效率，但同样也会降低插入和更新的效率，甚至有些情况下会降低查询效率。</p>
<p>因为mysql优化器在选择如何优化查询时，会根据统一信息，对每一个可以用到的索引来进行评估，以生成出一个最好的执行计划，如果同时有很多个索引都可以用于查询，就会增加mysql优化器生成执行计划的时间，同样会降低查询性能。</p>
<h3 id="4-4-2-禁止给表中的每一列都建立单独的索引"><a href="#4-4-2-禁止给表中的每一列都建立单独的索引" class="headerlink" title="4.4.2 禁止给表中的每一列都建立单独的索引"></a>4.4.2 禁止给表中的每一列都建立单独的索引</h3><p>5.6版本之前，一个sql只能使用到一个表中的一个索引，5.6以后，虽然有了合并索引的优化方式，但是还是远远没有使用一个联合索引的查询方式好</p>
<h3 id="4-4-3-每个Innodb表必须有个主键"><a href="#4-4-3-每个Innodb表必须有个主键" class="headerlink" title="4.4.3 每个Innodb表必须有个主键"></a>4.4.3 每个Innodb表必须有个主键</h3><p>Innodb是一种索引组织表：数据的存储的逻辑顺序和索引的顺序是相同的。</p>
<p>每个表都可以有多个索引，但是表的存储顺序只能有一种 Innodb是按照主键索引的顺序来组织表的。</p>
<p>不要使用更新频繁的列作为主键，不适用多列主键（相当于联合索引） 不要使用UUID、MD5、HASH、字符串列作为主键（无法保证数据的顺序增长）。</p>
<p>主键建议使用自增ID值。</p>
<h3 id="4-4-4-索引规约"><a href="#4-4-4-索引规约" class="headerlink" title="4.4.4 索引规约"></a>4.4.4 索引规约</h3><p>【建议】（1）避免在更新比较频繁、区分度不高的列上单独建立索引</p>
<ul>
<li>解读：区分度不高的列单独创建索引的优化效果很小，但是较为频繁的更新则会让索引的维护成本更高。</li>
</ul>
<p>【强制】（2） JOIN的表不允许超过五个。需要JOIN的字段，数据类型必须绝对一致; 多表关联查询时，保证被关联的字段需要有索引</p>
<ul>
<li><p>解读：太多表的JOIN会让Mysql的优化器更难权衡出一个“最佳”的执行计划（可能性为表数量的阶乘），同时要注意关联字段的类型、长度、字符编码等等是否一致。</p>
<p>【强制】（3）在一个联合索引中，若第一列索引区分度等于1，那么则不需要建立联合索引</p>
</li>
<li><p>解读：索引通过第一列就能够完全定位的数据，所以联合索引的后边部分是不需要的。</p>
</li>
</ul>
<p>【强制】（4）建立联合索引时，必须将区分度更高的字段放在左</p>
<ul>
<li>解读：区分度更高的列放在左边，能够在一开始就有效的过滤掉无用数据。提高索引的效率，相应我们在Mapper中编写SQL的WHERE条件中有多个条件时，需要先看看当前表是否有现成的联合索引直接使用，注意各个条件的顺序尽量和索引的顺序一致。</li>
</ul>
<p>【建议】（5）利用覆盖索引来进行查询操作，避免回表</p>
<ul>
<li>解读：覆盖查询即是查询只需要通过索引即可拿到所需DATA，而不再需要再次回表查询，所以效率相对很高。我们在使用EXPLAIN的结果，extra列会出现：”using index”。这里也要强调一下不要使用“SELECT * ”，否则几乎不可能使用到覆盖索引。</li>
</ul>
<p>【建议】（6）在较长VARCHAR字段,例如VARCHAR(100)上建立索引时，应指定索引长度，没必要对全字段建立索引，根据实际文本区分度决定索引长度即可</p>
<ul>
<li>解读：索引的长度与区分度是一对矛盾体，一般对字符串类型数据，若长度为20的索引，区分度会高达90%以上，则可以考虑创建长度例为20的索引，而非全字段索引。例如可以使用SELECT COUNT(DISTINCT LEFT(lesson_code, 20)) &#x2F; COUNT(*) FROM lesson;来确定lesson_code字段字符长度为20时文本区分度。</li>
</ul>
<p>【建议】（7）如果有ORDER BY的场景，请注意利用索引的有序性。ORDER BY最后的字段是联合索引的一部分，并且放在索引组合顺序的最后，避免出现file_sort的情况，影响查询性能。</p>
<ul>
<li>解读：</li>
<li>假设有查询条件为WHERE a&#x3D;? and b&#x3D;? ORDER BY c；存在索引：a_b_c，则此时可以利用索引排序；</li>
<li>反例：在查询条件中包含了范围查询，那么索引有序性无法利用，如:WHERE a&gt;10 ORDER BY b; 索引a_b无法排序。</li>
</ul>
<p>【建议】（8）在where中索引的列不能某个表达式的一部分，也不能是函数的参数</p>
<ul>
<li>解读：即是某列上已经添加了索引，但是若此列成为表达式的一部分、或者是函数的参数，Mysql无法将此列单独解析出来，索引也不会生效。</li>
</ul>
<p>【建议】 （9）我们在where条件中使用范围查询时，索引最多用于一个范围条件，超过一个则后边的不走索引</p>
<ul>
<li>解读：Mysql能够使用多个范围条件里边的最左边的第一个范围查询，但是后边的范围查询则无法使用。</li>
</ul>
<p>【建议】 （10）在多个表进行外连接时，表之间的关联字段类型必须完全一致</p>
<ul>
<li>解读：当两个表进行Join时，字段类型若没有完全一致，则加索引也不会生效，这里的完全一致包括但不限于字段类型、字段长度、字符集、collection等等。</li>
</ul>
<h2 id="常见索引列建议"><a href="#常见索引列建议" class="headerlink" title="常见索引列建议"></a>常见索引列建议</h2><p>1、出现在SELECT、UPDATE、DELETE语句的WHERE从句中的列</p>
<p>2、包含在ORDER BY、GROUP BY、DISTINCT中的字段</p>
<p>并不要将符合1和2中的字段的列都建立一个索引，通常将1、2中的字段建立联合索引效果更好</p>
<p>3、多表join的关联列</p>
<h2 id="如何选择索引列的顺序"><a href="#如何选择索引列的顺序" class="headerlink" title="如何选择索引列的顺序"></a>如何选择索引列的顺序</h2><p>建立索引的目的是：希望通过索引进行数据查找，减少随机IO，增加查询性能 ，索引能过滤出越少的数据，则从磁盘中读入的数据也就越少。</p>
<p>1、区分度最高的放在联合索引的最左侧（区分度&#x3D;列中不同值的数量&#x2F;列的总行数）；</p>
<p>2、尽量把字段长度小的列放在联合索引的最左侧（因为字段长度越小，一页能存储的数据量越大，IO性能也就越好）；</p>
<p>3、使用最频繁的列放到联合索引的左侧（这样可以比较少的建立一些索引）。</p>
<h2 id="避免建立冗余索引和重复索引"><a href="#避免建立冗余索引和重复索引" class="headerlink" title="避免建立冗余索引和重复索引"></a>避免建立冗余索引和重复索引</h2><p>因为这样会增加查询优化器生成执行计划的时间。</p>
<p><strong>重复索引示例：</strong>primary key(id)、index(id)、unique index(id)</p>
<p><strong>冗余索引示例：</strong>index(a,b,c)、index(a,b)、index(a)</p>
<h2 id="优先考虑覆盖索引"><a href="#优先考虑覆盖索引" class="headerlink" title="优先考虑覆盖索引"></a>优先考虑覆盖索引</h2><p>对于频繁的查询优先考虑使用覆盖索引。</p>
<p>覆盖索引：就是包含了所有查询字段(where,select,ordery by,group by包含的字段)的索引</p>
<p>覆盖索引的好处：</p>
<ul>
<li>避免Innodb表进行索引的二次查询</li>
<li>Innodb是以聚集索引的顺序来存储的，对于Innodb来说，二级索引在叶子节点中所保存的是行的主键信息，如果是用二级索引查询数据的话，在查找到相应的键值后，还要通过主键进行二次查询才能获取我们真实所需要的数据。而在覆盖索引中，二级索引的键值中可以获取所有的数据，避免了对主键的二次查询 ，减少了IO操作，提升了查询效率。</li>
<li>可以把随机IO变成顺序IO加快查询效率</li>
</ul>
<p>由于覆盖索引是按键值的顺序存储的，对于IO密集型的范围查找来说，对比随机从磁盘读取每一行的数据IO要少的多，因此利用覆盖索引在访问时也可以把磁盘的随机读取的IO转变成索引查找的顺序IO。</p>
<h2 id="索引SET规范"><a href="#索引SET规范" class="headerlink" title="索引SET规范"></a>索引SET规范</h2><p><strong>尽量避免使用外键约束</strong></p>
<p>1、不建议使用外键约束（foreign key），但一定要在表与表之间的关联键上建立索引；</p>
<p>2、外键可用于保证数据的参照完整性，但建议在业务端实现；</p>
<p>3、外键会影响父表和子表的写操作从而降低性能。</p>
<h2 id="数据库SQL开发规范"><a href="#数据库SQL开发规范" class="headerlink" title="数据库SQL开发规范"></a>数据库SQL开发规范</h2><h3 id="建议使用预编译语句进行数据库操作"><a href="#建议使用预编译语句进行数据库操作" class="headerlink" title="建议使用预编译语句进行数据库操作"></a>建议使用预编译语句进行数据库操作</h3><p>预编译语句可以重复使用这些计划，减少SQL编译所需要的时间，还可以解决动态SQL所带来的SQL注入的问题 只传参数，比传递SQL语句更高效 相同语句可以一次解析，多次使用，提高处理效率。</p>
<h3 id="不允许使用属性隐式转换"><a href="#不允许使用属性隐式转换" class="headerlink" title="不允许使用属性隐式转换"></a>不允许使用属性隐式转换</h3><p>隐式转换会导致索引失效。如：select name,phone from customer where id &#x3D; ‘111’;</p>
<p>解读：假设我们在手机号列上添加了索引，然后执行下面的SQL会发生什么？explain SELECT user_name FROM parent WHERE phone&#x3D;13812345678; 很明显就是索引不生效，会全表扫描。</p>
<h3 id="充分利用表上已经存在的索引"><a href="#充分利用表上已经存在的索引" class="headerlink" title="充分利用表上已经存在的索引"></a>充分利用表上已经存在的索引</h3><p>避免使用双%号的查询条件。</p>
<p>如a like ‘%123%’，（如果无前置%,只有后置%，是可以用到列上的索引的）</p>
<p>解读：根据索引的最左前缀原理，%开头的模糊查询无法使用索引，可以使用ES来做检索。</p>
<p>一个SQL只能利用到复合索引中的一列进行范围查询</p>
<p>如：有 a,b,c列的联合索引，在查询条件中有a列的范围查询，则在b,c列上的索引将不会被用到，在定义联合索引时，如果a列要用到范围查找的话，就要把a列放到联合索引的右侧。</p>
<p>使用left join或 not exists来优化not in操作</p>
<p>因为not in 也通常会使用索引失效。</p>
<h3 id="数据库设计时，应该要对以后扩展进行考虑"><a href="#数据库设计时，应该要对以后扩展进行考虑" class="headerlink" title="数据库设计时，应该要对以后扩展进行考虑"></a>数据库设计时，应该要对以后扩展进行考虑</h3><h3 id="程序连接不同的数据库使用不同的账号，禁止跨库查询"><a href="#程序连接不同的数据库使用不同的账号，禁止跨库查询" class="headerlink" title="程序连接不同的数据库使用不同的账号，禁止跨库查询"></a>程序连接不同的数据库使用不同的账号，禁止跨库查询</h3><p>1、为数据库迁移和分库分表留出余地</p>
<p>2、降低业务耦合度</p>
<p>3、避免权限过大而产生的安全风险</p>
<h3 id="禁止使用SELECT-必须使用SELECT-lt-字段列表-gt-查询"><a href="#禁止使用SELECT-必须使用SELECT-lt-字段列表-gt-查询" class="headerlink" title="禁止使用SELECT * 必须使用SELECT &lt;字段列表&gt; 查询"></a>禁止使用SELECT * 必须使用SELECT &lt;字段列表&gt; 查询</h3><p>原因：</p>
<ol>
<li>消耗更多的CPU和IO以网络带宽资源</li>
<li>无法使用覆盖索引</li>
<li>可减少表结构变更带来的影响</li>
<li>读取不需要的列会增加CPU、IO、NET消耗；</li>
</ol>
<h3 id="禁止使用不含字段列表的INSERT语句"><a href="#禁止使用不含字段列表的INSERT语句" class="headerlink" title="禁止使用不含字段列表的INSERT语句"></a>禁止使用不含字段列表的INSERT语句</h3><p>如：insert into values (‘a’,’b’,’c’);</p>
<p>应使用insert into t(c1,c2,c3) values (‘a’,’b’,’c’);</p>
<h3 id="避免使用子查询，可以把子查询优化为join操作"><a href="#避免使用子查询，可以把子查询优化为join操作" class="headerlink" title="避免使用子查询，可以把子查询优化为join操作"></a>避免使用子查询，可以把子查询优化为join操作</h3><p>通常子查询在in子句中，且子查询中为简单SQL(不包含union、group by、order by、limit从句)时，才可以把子查询转化为关联查询进行优化。</p>
<p>子查询性能差的原因：</p>
<p>1、子查询的结果集无法使用索引，通常子查询的结果集会被存储到临时表中，不论是内存临时表还是磁盘临时表都不会存在索引，所以查询性能会受到一定的影响；</p>
<p>3、特别是对于返回结果集比较大的子查询，其对查询性能的影响也就越大；</p>
<p>3、由于子查询会产生大量的临时表也没有索引，所以会消耗过多的CPU和IO资源，产生大量的慢查询。</p>
<h3 id="避免使用JOIN关联太多的表"><a href="#避免使用JOIN关联太多的表" class="headerlink" title="避免使用JOIN关联太多的表"></a>避免使用JOIN关联太多的表</h3><p>对于Mysql来说，是存在关联缓存的，缓存的大小可以由join_buffer_size参数进行设置。</p>
<p>在Mysql中，对于同一个SQL多关联（join）一个表，就会多分配一个关联缓存，如果在一个SQL中关联的表越多，所占用的内存也就越大。</p>
<p>如果程序中大量的使用了多表关联的操作，同时join_buffer_size设置的也不合理的情况下，就容易造成服务器内存溢出的情况，就会影响到服务器数据库性能的稳定性。</p>
<p>同时对于关联操作来说，会产生临时表操作，影响查询效率Mysql最多允许关联61个表，建议不超过5个。</p>
<h3 id="减少同数据库的交互次数"><a href="#减少同数据库的交互次数" class="headerlink" title="减少同数据库的交互次数"></a>减少同数据库的交互次数</h3><p>数据库更适合处理批量操作 合并多个相同的操作到一起，可以提高处理效率</p>
<h3 id="对应同一列进行or判断时，使用in代替or"><a href="#对应同一列进行or判断时，使用in代替or" class="headerlink" title="对应同一列进行or判断时，使用in代替or"></a>对应同一列进行or判断时，使用in代替or</h3><p>应尽量避免在WHERE子句中使用or作为连接条件</p>
<p>in的值不要超过500个in操作可以更有效的利用索引，or大多数情况下很少能利用到索引。</p>
<p>解读：根据情况可以选择使用UNION ALL来代替OR。</p>
<h3 id="禁止使用order-by-rand-进行随机排序"><a href="#禁止使用order-by-rand-进行随机排序" class="headerlink" title="禁止使用order by rand() 进行随机排序"></a>禁止使用order by rand() 进行随机排序</h3><p>会把表中所有符合条件的数据装载到内存中，然后在内存中对所有数据根据随机生成的值进行排序，并且可能会对每一行都生成一个随机值，如果满足条件的数据集非常大，就会消耗大量的CPU和IO及内存资源。</p>
<p>推荐在程序中获取一个随机值，然后从数据库中获取数据的方式</p>
<h3 id="WHERE从句中禁止对列进行函数转换和计算"><a href="#WHERE从句中禁止对列进行函数转换和计算" class="headerlink" title="WHERE从句中禁止对列进行函数转换和计算"></a>WHERE从句中禁止对列进行函数转换和计算</h3><p>对列进行函数转换或计算时会导致无法使用索引。</p>
<p>不推荐：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">where</span> <span class="hljs-type">date</span>(create_time)<span class="hljs-operator">=</span><span class="hljs-string">&#x27;20190101&#x27;</span><br></code></pre></td></tr></table></figure>

<p>推荐：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">where</span> create_time <span class="hljs-operator">&gt;=</span> <span class="hljs-string">&#x27;20190101&#x27;</span> <span class="hljs-keyword">and</span> create_time <span class="hljs-operator">&lt;</span> <span class="hljs-string">&#x27;20190102&#x27;</span><br></code></pre></td></tr></table></figure>



<h3 id="在明显不会有重复值时使用UNION-ALL而不是UNION"><a href="#在明显不会有重复值时使用UNION-ALL而不是UNION" class="headerlink" title="在明显不会有重复值时使用UNION ALL而不是UNION"></a>在明显不会有重复值时使用UNION ALL而不是UNION</h3><p>1、UNION会把两个结果集的所有数据放到临时表中后再进行去重操作</p>
<p>2、UNION ALL不会再对结果集进行去重操作</p>
<h3 id="拆分复杂的大SQL为多个4-11-1小SQL"><a href="#拆分复杂的大SQL为多个4-11-1小SQL" class="headerlink" title="拆分复杂的大SQL为多个4.11.1小SQL"></a>拆分复杂的大SQL为多个4.11.1小SQL</h3><p>1、大SQL：逻辑上比较复杂，需要占用大量CPU进行计算的SQL</p>
<p>2、MySQL：一个SQL只能使用一个CPU进行计算</p>
<p>3、SQL拆分后可以通过并行执行来提高处理效率</p>
<h3 id="禁止使用外键与级联，一切外键概念必须在应用层解决"><a href="#禁止使用外键与级联，一切外键概念必须在应用层解决" class="headerlink" title="禁止使用外键与级联，一切外键概念必须在应用层解决"></a>禁止使用外键与级联，一切外键概念必须在应用层解决</h3><ul>
<li>解读：外键与级联更新适用于单机低并发，不适合分布式、高并发集群;级联更新是强阻塞，存在数据库更新风暴的风险；外键影响数据库的插入速度。</li>
</ul>
<h2 id="数据库操作行为规范"><a href="#数据库操作行为规范" class="headerlink" title="数据库操作行为规范"></a>数据库操作行为规范</h2><h3 id="超100万行的批量写（UPDATE、DELETE、INSERT）操作，要分批多次进行操作"><a href="#超100万行的批量写（UPDATE、DELETE、INSERT）操作，要分批多次进行操作" class="headerlink" title="超100万行的批量写（UPDATE、DELETE、INSERT）操作，要分批多次进行操作"></a>超100万行的批量写（UPDATE、DELETE、INSERT）操作，要分批多次进行操作</h3><p>大批量操作可能会造成严重的主从延迟</p>
<p>主从环境中，大批量操作可能会造成严重的主从延迟，大批量的写操作一般都需要执行一定长的时间，而只有当主库上执行完成后，才会在其他从库上执行，所以会造成主库与从库长时间的延迟情况</p>
<p>binlog日志为row格式时会产生大量的日志</p>
<p>大批量写操作会产生大量日志，特别是对于row格式二进制数据而言，由于在row格式中会记录每一行数据的修改，我们一次修改的数据越多，产生的日志量也就会越多，日志的传输和恢复所需要的时间也就越长，这也是造成主从延迟的一个原因。</p>
<p>避免产生大事务操作</p>
<p>大批量修改数据，一定是在一个事务中进行的，这就会造成表中大批量数据进行锁定，从而导致大量的阻塞，阻塞会对MySQL的性能产生非常大的影响。</p>
<p>特别是长时间的阻塞会占满所有数据库的可用连接，这会使生产环境中的其他应用无法连接到数据库，因此一定要注意大批量写操作要进行分批。</p>
<h3 id="4-11-2-对于大表使用pt-online-schema-change修改表结构"><a href="#4-11-2-对于大表使用pt-online-schema-change修改表结构" class="headerlink" title="4.11.2 对于大表使用pt-online-schema-change修改表结构"></a>4.11.2 对于大表使用pt-online-schema-change修改表结构</h3><p>1、避免大表修改产生的主从延迟</p>
<p>2、避免在对表字段进行修改时进行锁表</p>
<p>对大表数据结构的修改一定要谨慎，会造成严重的锁表操作，尤其是生产环境，是不能容忍的。</p>
<p>pt-online-schema-change它会首先建立一个与原表结构相同的新表，并且在新表上进行表结构的修改，然后再把原表中的数据复制到新表中，并在原表中增加一些触发器。</p>
<p>把原表中新增的数据也复制到新表中，在行所有数据复制完成之后，把新表命名成原表，并把原来的表删除掉。</p>
<p>把原来一个DDL操作，分解成多个小的批次进行。</p>
<h3 id="4-11-3-禁止为程序使用的账号赋予super权限"><a href="#4-11-3-禁止为程序使用的账号赋予super权限" class="headerlink" title="4.11.3 禁止为程序使用的账号赋予super权限"></a>4.11.3 禁止为程序使用的账号赋予super权限</h3><p>当达到最大连接数限制时，还运行1个有super权限的用户连接super权限只能留给DBA处理问题的账号使用。</p>
<h3 id="4-11-4-对于程序连接数据库账号，遵循权限最小原则"><a href="#4-11-4-对于程序连接数据库账号，遵循权限最小原则" class="headerlink" title="4.11.4 对于程序连接数据库账号，遵循权限最小原则"></a>4.11.4 对于程序连接数据库账号，遵循权限最小原则</h3><p>程序使用数据库账号只能在一个DB下使用，不准跨库 程序使用的账号原则上不准有drop权限。</p>
<h2 id="接口设计规范"><a href="#接口设计规范" class="headerlink" title="接口设计规范"></a>接口设计规范</h2><h2 id="基本规范"><a href="#基本规范" class="headerlink" title="基本规范"></a>基本规范</h2><h3 id="公共参数"><a href="#公共参数" class="headerlink" title="公共参数"></a>公共参数</h3><p>公共参数是每个接口都要携带的参数，描述每个接口的基本信息，用于统计或其他用途，放在header或url参数中。例如：</p>
<table>
<thead>
<tr>
<th>字段名称</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>version</td>
<td>客户端版本。1.0.0</td>
</tr>
<tr>
<td>token</td>
<td>登录令牌</td>
</tr>
<tr>
<td>os</td>
<td>手机系统版本。12</td>
</tr>
<tr>
<td>from</td>
<td>请求来源。android&#x2F;ios&#x2F;h5</td>
</tr>
<tr>
<td>screen</td>
<td>手机尺寸。1080*1920</td>
</tr>
<tr>
<td>model</td>
<td>机型。IPhone7</td>
</tr>
<tr>
<td>net</td>
<td>网络状态。wifi</td>
</tr>
</tbody></table>
<h3 id="响应数据"><a href="#响应数据" class="headerlink" title="响应数据"></a>响应数据</h3><p>为了方便给客户端响应，响应数据会包含三个属性，状态码（code）,信息描述（message）,响应数据（data）。客户端根据状态码及信息描述可快速知道接口，如果状态码返回成功，再开始处理数据。</p>
<p>array类型数据。通过list字段，保证data的Object结构。</p>
<p>分页类型数据。返回总条数，用于判断是否可以加载更多。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// object类型数据</span><br><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;msg&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;成功&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><span class="hljs-comment">// array类型数据。</span><br><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;msg&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;成功&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;list&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><span class="hljs-comment">// 分页类型数据。</span><br><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;msg&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;成功&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;list&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><br>        <span class="hljs-attr">&quot;total&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;10&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<p>列表类数据接口，无论是否要求分页，最好支持分页，pageSize&#x3D;Integer.Max即可。</p>
<p>响应结果定义及常用方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">R</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">793034041048451317L</span>;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> code;<br>    <span class="hljs-keyword">private</span> String message;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Object</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getCode</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> code;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCode</span><span class="hljs-params">(<span class="hljs-type">int</span> code)</span> &#123;<br>        <span class="hljs-built_in">this</span>.code = code;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getMessage</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> message;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMessage</span><span class="hljs-params">(String message)</span> &#123;<br>        <span class="hljs-built_in">this</span>.message = message;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getData</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> data;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 放入响应枚举</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> R <span class="hljs-title function_">fillCode</span><span class="hljs-params">(CodeEnum codeEnum)</span>&#123;<br>        <span class="hljs-built_in">this</span>.setCode(codeEnum.getCode());<br>        <span class="hljs-built_in">this</span>.setMessage(codeEnum.getMessage());<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 放入响应码及信息</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> R <span class="hljs-title function_">fillCode</span><span class="hljs-params">(<span class="hljs-type">int</span> code, String message)</span>&#123;<br>        <span class="hljs-built_in">this</span>.setCode(code);<br>        <span class="hljs-built_in">this</span>.setMessage(message);<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 处理成功，放入自定义业务数据集合</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> R <span class="hljs-title function_">fillData</span><span class="hljs-params">(Object data)</span> &#123;<br>        <span class="hljs-built_in">this</span>.setCode(CodeEnum.SUCCESS.getCode());<br>        <span class="hljs-built_in">this</span>.setMessage(CodeEnum.SUCCESS.getMessage());<br>        <span class="hljs-built_in">this</span>.data = data;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="字段类型规范"><a href="#字段类型规范" class="headerlink" title="字段类型规范"></a>字段类型规范</h3><p>统一使用String类型。某些情况，统一使用String可以防止解析失败，减少类型转化操作。</p>
<p>Boolean类型，1是0否。客户端处理时，非1都是false。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;1&quot;</span>.equals(isVip))&#123;<br>    <br>&#125;<span class="hljs-keyword">else</span>&#123;<br>    <br>&#125;<br></code></pre></td></tr></table></figure>

<p>status类型字段，从1+开始，区别Boolean的0和1。“0”有两种含义，（1）Boolean类型的false，（2）默认的status</p>
<h3 id="上传-x2F-下载"><a href="#上传-x2F-下载" class="headerlink" title="上传&#x2F;下载"></a>上传&#x2F;下载</h3><p>上传&#x2F;下载，参数增加文件md5，用于完整性校验（传输过程可能丢失数据）。</p>
<h3 id="避免精度丢失"><a href="#避免精度丢失" class="headerlink" title="避免精度丢失"></a>避免精度丢失</h3><p>缩小单位保存数据，如：钱以分为单位、距离以米为单位。</p>
<h2 id="调用接口的先决条件-token"><a href="#调用接口的先决条件-token" class="headerlink" title="调用接口的先决条件-token"></a>调用接口的先决条件-token</h2><p>获取token一般会涉及到几个参数<code>appid</code>，<code>appkey</code>，<code>timestamp</code>，<code>nonce</code>，<code>sign</code>。我们通过以上几个参数来获取调用系统的凭证。</p>
<p><code>appid</code>和<code>appkey</code>可以直接通过平台线上申请，也可以线下直接颁发。<code>appid</code>是全局唯一的，每个<code>appid</code>将对应一个客户，<code>appkey</code>需要高度保密。</p>
<p><code>timestamp</code>是时间戳，使用系统当前的unix时间戳。时间戳的目的就是为了减轻DOS攻击。防止请求被拦截后一直尝试请求接口。服务器端设置时间戳阀值，如果请求时间戳和服务器时间超过阀值，则响应失败。</p>
<p><code>nonce</code>是随机值。随机值主要是为了增加<code>sign</code>的多变性，也可以保护接口的幂等性，相邻的两次请求<code>nonce</code>不允许重复，如果重复则认为是重复提交，响应失败。</p>
<p><code>sign</code>是参数签名，将<code>appkey</code>，<code>timestamp</code>，<code>nonce</code>拼接起来进行md5加密（当然使用其他方式进行不可逆加密也没问题）。</p>
<p><code>token</code>，使用参数<code>appid</code>，<code>timestamp</code>，<code>nonce</code>，<code>sign</code>来获取token，作为系统调用的唯一凭证。<code>token</code>可以设置一次有效（这样安全性更高），也可以设置时效性，这里推荐设置时效性。如果一次有效的话这个接口的请求频率可能会很高。<code>token</code>推荐加到请求头上，这样可以跟业务参数完全区分开来。</p>
<h2 id="使用POST作为接口请求方式"><a href="#使用POST作为接口请求方式" class="headerlink" title="使用POST作为接口请求方式"></a>使用POST作为接口请求方式</h2><p>一般调用接口最常用的两种方式就是GET和POST。两者的区别也很明显，GET请求会将参数暴露在浏览器URL中，而且对长度也有限制。为了更高的安全性，所有接口都采用POST方式请求。</p>
<h3 id="GET、POST、PUT、DELETE对比"><a href="#GET、POST、PUT、DELETE对比" class="headerlink" title="GET、POST、PUT、DELETE对比"></a>GET、POST、PUT、DELETE对比</h3><h4 id="1-GET"><a href="#1-GET" class="headerlink" title="1. GET"></a>1. GET</h4><ul>
<li>安全且幂等</li>
<li>获取表示</li>
<li>变更时获取表示（缓存）<br>适合查询类的接口使用</li>
</ul>
<h4 id="2-POST"><a href="#2-POST" class="headerlink" title="2. POST"></a>2. POST</h4><ul>
<li>不安全且不幂等</li>
<li>使用服务端管理的（自动产生）的实例号创建资源</li>
<li>创建子资源</li>
<li>部分更新资源</li>
<li>如果没有被修改，则不过更新资源（乐观锁）<br>适合数据提交类的接口使用</li>
</ul>
<h4 id="3-PUT"><a href="#3-PUT" class="headerlink" title="3. PUT"></a>3. PUT</h4><ul>
<li>不安全但幂等</li>
<li>用客户端管理的实例号创建一个资源</li>
<li>通过替换的方式更新资源</li>
<li>如果未被修改，则更新资源（乐观锁）<br>适合更新数据的接口使用</li>
</ul>
<h4 id="4-DELETE"><a href="#4-DELETE" class="headerlink" title="4. DELETE"></a>4. DELETE</h4><ul>
<li>不安全但幂等</li>
<li>删除资源<br>适合删除数据的接口使用</li>
</ul>
<p>列表界面</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// 静态列表</span><br><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;张三&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;sex&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;男&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;age&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;20岁&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;nickName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;小张&quot;</span><br><span class="hljs-punctuation">&#125;</span><br><span class="hljs-comment">// 动态列表</span><br><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;userInfos&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;key&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;姓名&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;value&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;张三&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;key&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;性别&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;value&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;男&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;key&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;年龄&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;value&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;20岁&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;key&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;昵称&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;value&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;小张&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<p>多个boolean可以flag替换</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;flag&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;7&quot;</span> <span class="hljs-comment">// 二进制：111，三位分别表示三个boolean字段</span><br><span class="hljs-punctuation">&#125;</span><br><br>long flag = <span class="hljs-number">7</span>;<br>System.out.println(<span class="hljs-string">&quot;bit=&quot;</span>+Long.toBinaryString(flag));<br>System.out.println(<span class="hljs-string">&quot;第一位=&quot;</span>+((flag&amp;<span class="hljs-number">1</span>)==<span class="hljs-number">1</span>));<br>System.out.println(<span class="hljs-string">&quot;第二位=&quot;</span>+((flag&amp;<span class="hljs-number">2</span>)==<span class="hljs-number">1</span>));<br>System.out.println(<span class="hljs-string">&quot;第三位=&quot;</span>+((flag&amp;<span class="hljs-number">4</span>)==<span class="hljs-number">1</span>));<br></code></pre></td></tr></table></figure>



<h2 id="响应状态码"><a href="#响应状态码" class="headerlink" title="响应状态码"></a>响应状态码</h2><p>采用http的状态码进行数据封装，例如200表示请求成功，4xx表示客户端错误，5xx表示服务器内部发生错误。状态码设计参考如下：</p>
<table>
<thead>
<tr>
<th>分类</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1xx</td>
<td>信息，服务器收到请求，需要请求者继续执行操作</td>
</tr>
<tr>
<td>2xx</td>
<td>成功</td>
</tr>
<tr>
<td>3xx</td>
<td>重定向，需要进一步的操作以完成请求</td>
</tr>
<tr>
<td>4xx</td>
<td>客户端错误，请求包含语法错误或无法完成请求</td>
</tr>
<tr>
<td>5xx</td>
<td>服务端错误</td>
</tr>
</tbody></table>
<p>状态码枚举类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">CodeEnum</span> &#123;<br><br>    <span class="hljs-comment">// 根据业务需求进行添加</span><br>    SUCCESS(<span class="hljs-number">200</span>,<span class="hljs-string">&quot;处理成功&quot;</span>),<br>    ERROR_PATH(<span class="hljs-number">404</span>,<span class="hljs-string">&quot;请求地址错误&quot;</span>),<br>    ERROR_SERVER(<span class="hljs-number">505</span>,<span class="hljs-string">&quot;服务器内部发生错误&quot;</span>);<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> code;<br>    <span class="hljs-keyword">private</span> String message;<br>    <br>    CodeEnum(<span class="hljs-type">int</span> code, String message) &#123;<br>        <span class="hljs-built_in">this</span>.code = code;<br>        <span class="hljs-built_in">this</span>.message = message;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getCode</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> code;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCode</span><span class="hljs-params">(<span class="hljs-type">int</span> code)</span> &#123;<br>        <span class="hljs-built_in">this</span>.code = code;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getMessage</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> message;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMessage</span><span class="hljs-params">(String message)</span> &#123;<br>        <span class="hljs-built_in">this</span>.message = message;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="正常响应"><a href="#正常响应" class="headerlink" title="正常响应"></a>正常响应</h3><p>响应状态码2xx</p>
<ul>
<li>200：常规请求</li>
<li>201：创建成功</li>
</ul>
<h3 id="重定向响应"><a href="#重定向响应" class="headerlink" title="重定向响应"></a>重定向响应</h3><p>响应状态码3xx</p>
<ul>
<li>301：永久重定向</li>
<li>302：暂时重定向</li>
</ul>
<h3 id="客户端异常"><a href="#客户端异常" class="headerlink" title="客户端异常"></a>客户端异常</h3><p>响应状态码4xx</p>
<ul>
<li>403：请求无权限</li>
<li>404：请求路径不存在</li>
<li>405：请求方法不存在</li>
</ul>
<h3 id="服务器异常"><a href="#服务器异常" class="headerlink" title="服务器异常"></a>服务器异常</h3><p>响应状态码5xx</p>
<ul>
<li>500：服务器异常</li>
</ul>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div></div>
      <div>https://lfrok.top/2022/10/09/README/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>B612🚀</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年10月9日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/10/09/%E9%A9%AC%E5%85%8B%E6%80%9D/%E4%BD%A0%E8%A7%81%E6%88%96%E8%80%85%E4%B8%8D%E8%A7%81/" title="你见或不见">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">你见或不见</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/10/09/Java/java%E5%9F%BA%E7%A1%80/" title="Java基础">
                        <span class="hidden-mobile">Java基础</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <div id="lv-container" data-id="city" data-uid="MTAyMC8zODU3Mi8xNTEwMA==">
    <script type="text/javascript">
      Fluid.utils.loadComments('#lv-container', function() {
        Fluid.utils.createScript('https://cdn-city.livere.com/js/embed.dist.js');
      });
    </script>
    <noscript>Please enable JavaScript to view the comments</noscript>
  </div>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Fork</span></a> <strong><i style= color:red>☭ </i></strong> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>B-612</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
