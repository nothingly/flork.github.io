

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/logo.png">
  <link rel="icon" href="/img/logo.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="B612ğŸš€">
  <meta name="keywords" content="">
  
    <meta name="description" content="1ã€Spring1-1.Spring ç®€ä»‹Springï¼šæ˜¥å¤©â€”â€”&gt;ç»™è½¯ä»¶è¡Œä¸šå¸¦æ¥äº†æ˜¥å¤©ï¼ 2002ï¼Œé¦–æ¬¡æ¨å‡ºäº†Springæ¡†æ¶çš„é›å½¢ï¼šinterface21æ¡†æ¶ï¼ Springæ¡†æ¶å³ä»¥interface21æ¡†æ¶ä¸ºåŸºç¡€ï¼Œç»è¿‡é‡æ–°è®¾è®¡ï¼Œå¹¶ä¸æ–­ä¸°å¯Œå…¶å†…æ¶µï¼Œäº2004å¹´3æœˆ24æ—¥å‘å¸ƒäº†1.0æ­£å¼ç‰ˆã€‚ Rod Johnsonï¼ŒSpring Frameworkåˆ›å§‹äººï¼Œè‘—åä½œè€…ã€‚å¾ˆéš¾æƒ³è±¡Rod Johns">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring">
<meta property="og:url" content="https://lfrok.top/2022/11/27/Java/Spring/index.html">
<meta property="og:site_name" content="Le Petit Prince">
<meta property="og:description" content="1ã€Spring1-1.Spring ç®€ä»‹Springï¼šæ˜¥å¤©â€”â€”&gt;ç»™è½¯ä»¶è¡Œä¸šå¸¦æ¥äº†æ˜¥å¤©ï¼ 2002ï¼Œé¦–æ¬¡æ¨å‡ºäº†Springæ¡†æ¶çš„é›å½¢ï¼šinterface21æ¡†æ¶ï¼ Springæ¡†æ¶å³ä»¥interface21æ¡†æ¶ä¸ºåŸºç¡€ï¼Œç»è¿‡é‡æ–°è®¾è®¡ï¼Œå¹¶ä¸æ–­ä¸°å¯Œå…¶å†…æ¶µï¼Œäº2004å¹´3æœˆ24æ—¥å‘å¸ƒäº†1.0æ­£å¼ç‰ˆã€‚ Rod Johnsonï¼ŒSpring Frameworkåˆ›å§‹äººï¼Œè‘—åä½œè€…ã€‚å¾ˆéš¾æƒ³è±¡Rod Johns">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-11-27T09:58:46.501Z">
<meta property="article:modified_time" content="2022-11-27T10:33:46.985Z">
<meta property="article:author" content="B612ğŸš€">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>Spring - Le Petit Prince</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"lfrok.top","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  

  

  



  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>B-612</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/same/">
                <i class="iconfont icon-twitch-fill"></i>
                æˆ‘ä»¬
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://pprince.top/bgc/bgc-2.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Spring"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-11-27 17:58" pubdate>
          2022å¹´11æœˆ27æ—¥ ä¸‹åˆ
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          37k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          311 åˆ†é’Ÿ
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Spring</h1>
            
            
              <div class="markdown-body">
                
                <p>1ã€Spring<br>1-1.Spring ç®€ä»‹<br>Springï¼šæ˜¥å¤©â€”â€”&gt;ç»™è½¯ä»¶è¡Œä¸šå¸¦æ¥äº†æ˜¥å¤©ï¼</p>
<p>2002ï¼Œé¦–æ¬¡æ¨å‡ºäº†Springæ¡†æ¶çš„é›å½¢ï¼šinterface21æ¡†æ¶ï¼</p>
<p>Springæ¡†æ¶å³ä»¥interface21æ¡†æ¶ä¸ºåŸºç¡€ï¼Œç»è¿‡é‡æ–°è®¾è®¡ï¼Œå¹¶ä¸æ–­ä¸°å¯Œå…¶å†…æ¶µï¼Œäº2004å¹´3æœˆ24æ—¥å‘å¸ƒäº†1.0æ­£å¼ç‰ˆã€‚</p>
<p>Rod Johnsonï¼ŒSpring Frameworkåˆ›å§‹äººï¼Œè‘—åä½œè€…ã€‚å¾ˆéš¾æƒ³è±¡Rod Johnsonçš„å­¦å†ï¼ŒçœŸçš„è®©å¥½å¤šäººå¤§åƒä¸€æƒŠï¼Œä»–æ˜¯æ‚‰å°¼å¤§å­¦çš„åšå£«ï¼Œç„¶è€Œä»–çš„ä¸“ä¸šä¸æ˜¯è®¡ç®—æœºï¼Œè€Œæ˜¯éŸ³ä¹å­¦ã€‚</p>
<p>Springç†å¿µï¼šä½¿ç°æœ‰çš„æŠ€æœ¯æ›´åŠ å®¹æ˜“ä½¿ç”¨ï¼Œæœ¬èº«æ˜¯ä¸€ä¸ªå¤§æ‚çƒ©ï¼Œæ•´åˆäº†ç°æœ‰çš„æŠ€æœ¯æ¡†æ¶ï¼</p>
<p>1-2.Spring çš„ä¼˜ç‚¹<br>Springæ˜¯ä¸€ä¸ªå¼€æºçš„å…è´¹çš„æ¡†æ¶ï¼ˆå®¹å™¨ï¼‰ï¼<br>Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€éå…¥ä¾µå¼çš„æ¡†æ¶ï¼<br>æ§åˆ¶åè½¬ï¼ˆIOCï¼‰ï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰ï¼<br>æ”¯æŒäº‹åŠ¡çš„å¤„ç†ï¼Œå¯¹æ¡†æ¶æ•´åˆçš„æ”¯æŒï¼<br>æ€»ç»“ä¸€å¥è¯ï¼šSpringå°±æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ§åˆ¶åè½¬ï¼ˆIOCï¼‰å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰çš„æ¡†æ¶ï¼</p>
<p>1-3.Spring ç»„æˆ</p>
<p>1-4.Spring æ‹“å±•<br>ç°ä»£åŒ–çš„Javaå¼€å‘ï¼è¯´ç™½å°±æ˜¯åŸºäºSpringçš„å¼€å‘ï¼</p>
<p>Spring Boot</p>
<p>ä¸€ä¸ªå¿«é€Ÿå¼€å‘çš„è„šæ‰‹æ¶ã€‚<br>åŸºäºSpringBootå¯ä»¥å¿«é€Ÿçš„å¼€å‘å•ä¸ªå¾®æœåŠ¡ã€‚<br>çº¦å®šå¤§äºé…ç½®ã€‚<br>Spring Cloud</p>
<p>SpringCloudæ˜¯åŸºäºSpringBootå®ç°çš„ã€‚<br>å› ä¸ºç°åœ¨å¤§å¤šæ•°å…¬å¸éƒ½åœ¨ä½¿ç”¨SpringBootè¿›è¡Œå¿«é€Ÿå¼€å‘ï¼Œå­¦ä¹ SpringBootçš„å‰æï¼Œéœ€è¦å®Œå…¨æŒæ¡SpringåŠSpringMVCï¼æ‰¿ä¸Šå¯ä¸‹çš„ä½œç”¨ï¼<br>å¼Šç«¯ï¼šå‘å±•äº†å¤ªä¹…ä¹‹åï¼Œè¿èƒŒäº†åŸæ¥çš„ç†å¿µï¼é…ç½®ååˆ†ç¹çï¼Œäººç§°ï¼šâ€œé…ç½®åœ°ç‹±ï¼â€</p>
<p>2ã€IOCç†è®ºæ¨å¯¼<br>2-1.UserDao æ¥å£<br>public interface UserDao {</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">void</span> <span class="hljs-built_in">getUser</span>();<br><br><span class="hljs-built_in">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>2-2.UserDaoImpl å®ç°ç±»<br>public class UserDaoImpl implements UserDao {</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUser</span>()</span> &#123;<br>    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;è·å–ç”¨æˆ·æ•°æ®&quot;</span>);<br>&#125;<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>2-3.UserService ä¸šåŠ¡æ¥å£<br>public interface UserService {</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">void</span> <span class="hljs-built_in">getUser</span>();<br><br><span class="hljs-built_in">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>2-4.UserServiceImpl ä¸šåŠ¡å®ç°ç±»<br>public class UserServiceImpl implements UserService {</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs arcade">UserDao userDao = <span class="hljs-keyword">new</span> UserDaoImpl();<br><br>public <span class="hljs-keyword">void</span> <span class="hljs-built_in">getUser</span>() &#123;<br>  userDao.<span class="hljs-built_in">getUser</span>();<br>&#125;<br><br><span class="hljs-built_in">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>2-5.æµ‹è¯•<br>public class Test {<br>public static void main(String[] args) {</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs abnf">    UserService userService <span class="hljs-operator">=</span> new UserServiceImpl()<span class="hljs-comment">;</span><br>    userService.getUser()<span class="hljs-comment">;</span><br><br>&#125;<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>â€ƒâ€ƒåœ¨æˆ‘ä»¬ä¹‹å‰çš„ä¸šåŠ¡ä¸­ï¼Œç”¨æˆ·çš„éœ€æ±‚å¯èƒ½ä¼šå½±å“æˆ‘ä»¬åŸæ¥çš„ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚å»ä¿®æ”¹åŸä»£ç ï¼å¦‚æœç¨‹åºä»£ç é‡ååˆ†å¤§ï¼Œä¿®æ”¹ä¸€æ¬¡çš„æˆæœ¬ä»£ä»·ååˆ†æ˜‚è´µï¼</p>
<p>â€ƒâ€ƒæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªSetæ¥å£å®ç°ï¼Œå·²ç»å‘ç”Ÿäº†é©å‘½æ€§çš„å˜åŒ–ï¼</p>
<p>UserDao userDao;</p>
<p>public void setUserDao(UserDao userDao){<br>this.userDao &#x3D; userDao;<br>}<br>1<br>2<br>3<br>4<br>5<br>â€ƒâ€ƒä¹‹å‰ï¼Œç¨‹åºæ˜¯ä¸»åŠ¨åˆ›å»ºå¯¹è±¡ï¼æ§åˆ¶æƒåœ¨ç¨‹åºå‘˜æ‰‹ä¸Šï¼</p>
<p>â€ƒâ€ƒä½¿ç”¨äº†setæ³¨å…¥åï¼Œç¨‹åºä¸å†å…·æœ‰ä¸»åŠ¨æ€§ï¼Œè€Œæ˜¯å˜æˆäº†è¢«åŠ¨çš„æ¥å—å¯¹è±¡ï¼</p>
<p>æ§åˆ¶åè½¬äº†ï¼Œä¸»åŠ¨æƒäº¤ç»™ç”¨æˆ·äº†</p>
<p>â€ƒâ€ƒè¿™ç§æ€æƒ³ï¼Œä»æœ¬è´¨ä¸Šè§£å†³äº†é—®é¢˜ï¼Œæˆ‘ä»¬ç¨‹åºçŒ¿ä¸ç”¨å†å»ç®¡ç†å¯¹è±¡çš„åˆ›å»ºäº†ã€‚ç³»ç»Ÿçš„è€¦åˆæ€§å¤§å¤§é™ä½~ï¼Œå¯ä»¥æ›´åŠ ä¸“æ³¨çš„åœ¨ä¸šåŠ¡çš„å®ç°ä¸Šï¼è¿™æ˜¯IOCçš„åŸå‹ï¼</p>
<p>3ã€IOCæœ¬è´¨</p>
<p>â€ƒâ€ƒæ§åˆ¶åè½¬IoCï¼ˆInversion of Controlï¼‰ï¼Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼ŒDIï¼ˆä¾èµ–æ³¨å…¥ï¼‰æ˜¯å®ç°IoCçš„ä¸€ç§æ–¹æ³•ï¼Œä¹Ÿæœ‰äººè®¤ä¸ºDIåªæ˜¯IoCçš„å¦ä¸€ç§è¯´æ³•ã€‚æ²¡æœ‰IoCçš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå¯¹è±¡çš„åˆ›å»ºä¸å¯¹è±¡é—´çš„ä¾èµ–å…³ç³»å®Œå…¨ç¡¬ç¼–ç åœ¨ç¨‹åºä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºç”±ç¨‹åºè‡ªå·±æ§åˆ¶ï¼Œæ§åˆ¶åè½¬åå°†å¯¹è±¡çš„åˆ›å»ºè½¬ç§»ç»™ç¬¬ä¸‰æ–¹ï¼Œä¸ªäººè®¤ä¸ºæ‰€è°“æ§åˆ¶åè½¬å°±æ˜¯ï¼šè·å¾—ä¾èµ–å¯¹è±¡çš„æ–¹å¼åè½¬äº†ã€‚</p>
<p>â€ƒâ€ƒé‡‡ç”¨XMLæ–¹å¼é…ç½®Beançš„æ—¶å€™ï¼ŒBeançš„å®šä¹‰ä¿¡æ¯æ˜¯å’Œå®ç°åˆ†ç¦»çš„ï¼Œè€Œé‡‡ç”¨æ³¨è§£çš„æ–¹å¼å¯ä»¥æŠŠä¸¤è€…åˆä¸ºä¸€ä½“ï¼ŒBeançš„å®šä¹‰ä¿¡æ¯ç›´æ¥ä»¥æ³¨è§£çš„å½¢å¼å®šä¹‰åœ¨å®ç°ç±»ä¸­ï¼Œä»è€Œè¾¾åˆ°äº†é›¶é…ç½®çš„ç›®çš„ã€‚</p>
<p>â€ƒâ€ƒæ§åˆ¶åè½¬æ˜¯ä¸€ç§é€šè¿‡æè¿°ï¼ˆXMLæˆ–æ³¨è§£ï¼‰å¹¶é€šè¿‡ç¬¬ä¸‰æ–¹å»ç”Ÿäº§æˆ–è·å–ç‰¹å®šå¯¹è±¡çš„æ–¹å¼ã€‚åœ¨Springä¸­å®ç°æ§åˆ¶åè½¬çš„æ˜¯IoCå®¹å™¨ï¼Œå…¶å®ç°æ–¹æ³•æ˜¯ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼ŒDIï¼‰ã€‚</p>
<p>4ã€Spring å…¥é—¨ç¨‹åº<br>4-1.å®ä½“ç±»<br>public class User {<br>private String name;</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getName</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> name;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setName</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">toString</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;User&#123;&quot;</span> +<br>            <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>            <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>&#125;<br><br><span class="hljs-variable constant_">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>4-2.é…ç½®æ–‡ä»¶</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;!<span class="hljs-comment">--ä½¿ç”¨Spring æ¥åˆ›å»ºå¯¹è±¡ï¼Œåœ¨Spring ä¸­ï¼Œè¿™äº›éƒ½ç§°ä¸ºbean</span><br>ç±»å‹  å˜é‡å = <span class="hljs-built_in">new</span> ç±»å‹();<br><span class="hljs-keyword">User</span> <span class="hljs-keyword">user</span> = <span class="hljs-built_in">new</span> <span class="hljs-keyword">User</span>();<br><br>    bean = å¯¹è±¡ <span class="hljs-built_in">new</span> <span class="hljs-keyword">User</span>();<br>id = å˜é‡å<br><span class="hljs-keyword">class</span> = <span class="hljs-built_in">new</span> çš„å¯¹è±¡;<br>property ç›¸å½“äº ç»™å¯¹è±¡ä¸­çš„å±æ€§è®¾ç½®ä¸€ä¸ªå€¼ï¼<br><br><span class="hljs-comment">--&gt;</span><br>&lt;bean id=&quot;user&quot; <span class="hljs-keyword">class</span>=&quot;cn.bloghut.domain.User&quot;&gt;<br>        &lt;property <span class="hljs-type">name</span>=&quot;name&quot; <span class="hljs-keyword">value</span>=&quot;csdn_é—²è¨€&quot;/&gt;<br>&lt;/bean&gt;<br><br><span class="hljs-type">TEXT</span><br></code></pre></td></tr></table></figure>

<p>1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 4-3.æµ‹è¯• public static void main(String[] args) { &#x2F;&#x2F;è·å–Spring çš„ä¸Šä¸‹æ–‡å¯¹è±¡ ApplicationContext ac &#x3D; new ClassPathXmlApplicationContext(â€œbeans.xmlâ€); &#x2F;&#x2F;æˆ‘ä»¬çš„å¯¹è±¡ç°åœ¨éƒ½åœ¨Spring ä¸­ç®¡ç†äº†ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ï¼Œç›´æ¥å»é‡Œé¢å–å‡ºæ¥å°±è¡Œäº† User user &#x3D; (User)ac.getBean(â€œuserâ€); &#x2F;&#x2F;æ‰“å° System.out.println(user.toString()); } 1 2 3 4 5 6 7 8 4-4.ç»“æœ User{name&#x3D;â€™é—²è¨€â€™} 1 4-5.æ€è€ƒé—®é¢˜ï¼Ÿ Helloå¯¹è±¡æ˜¯è°åˆ›å»ºçš„ï¼Ÿ</p>
<p>â€ƒâ€ƒHelloå¯¹è±¡æ˜¯ç”±Springåˆ›å»ºçš„ã€‚</p>
<p>Helloå¯¹è±¡çš„å±æ€§æ˜¯æ€ä¹ˆè®¾ç½®çš„ï¼Ÿ<br>â€ƒâ€ƒHelloå¯¹è±¡çš„å±æ€§æ˜¯ç”±Springå®¹å™¨è®¾ç½®çš„ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹å°±å«æ§åˆ¶åè½¬ï¼š</p>
<p>â€ƒâ€ƒæ§åˆ¶ï¼šè°æ¥æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºï¼Œä¼ ç»Ÿåº”ç”¨ç¨‹åºçš„å¯¹è±¡æ˜¯ç”±ç¨‹åºæœ¬èº«æ§åˆ¶åˆ›å»ºçš„ï¼Œä½¿ç”¨Springåï¼Œå¯¹è±¡æ˜¯ç”±Springæ¥åˆ›å»ºçš„ã€‚</p>
<p>â€ƒâ€ƒåè½¬ï¼šç¨‹åºæœ¬èº«ä¸åˆ›å»ºå¯¹è±¡ï¼Œè€Œå˜æˆè¢«åŠ¨çš„æ¥æ”¶å¯¹è±¡ã€‚</p>
<p>ä¾èµ–æ³¨å…¥ï¼šå°±æ˜¯åˆ©ç”¨setæ–¹æ³•æ¥è¿›è¡Œæ³¨å…¥çš„ã€‚</p>
<p>IOCæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œç”±ä¸»åŠ¨çš„ç¼–ç¨‹å˜æˆè¢«åŠ¨çš„æ¥æ”¶ã€‚</p>
<p>å¯ä»¥é€šè¿‡new ClassPathXmlApplicationContextå»æµè§ˆä¸€ä¸‹åº•å±‚æºç ã€‚</p>
<p>åˆ°äº†ç°åœ¨ï¼Œä¸ç”¨åœ¨ç¨‹åºä¸­å»æ”¹åŠ¨äº†ï¼Œè¦å®ç°ä¸åŒçš„æ“ä½œï¼Œåªéœ€è¦åœ¨xmlé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œä¿®æ”¹ï¼Œæ‰€è°“çš„IOCï¼Œä¸€å¥è¯æå®šï¼šå¯¹è±¡ç”±Springæ¥åˆ›å»ºï¼Œç®¡ç†ï¼Œè£…é…ï¼</p>
<p>5ã€IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼<br>5-1.ä½¿ç”¨æ— å‚æ„é€ åˆ›å»ºå¯¹è±¡ï¼Œé»˜è®¤ï¼<br>public User() {<br>System.out.println(â€œUser ç©ºå‚æ„é€ æ–¹æ³•æ‰§è¡Œäº†â€);<br>}</p>
<p>1 2 3 4 5 6 7 8 5-2.ä½¿ç”¨æœ‰å‚æ„é€ åˆ›å»ºå¯¹è±¡ ä¸‹æ ‡èµ‹å€¼</p>
<p>public User(String name) {<br>this.name &#x3D; name;<br>}</p>
<p>1 2 3 4 5 6 7 5-3.ç±»å‹ public User(String name) { this.name &#x3D; name; }</p>
<p>å‚æ•°å</p>
<p>1 2 3 4 5 6 7 8 9 10 11 12 13</p>
<p>æ€»ç»“ï¼šåœ¨é…ç½®æ–‡ä»¶åŠ è½½çš„æ—¶å€™ï¼Œå®¹å™¨ä¸­ç®¡ç†çš„å¯¹è±¡å°±å·²ç»åˆå§‹åŒ–äº†ï¼</p>
<p>Spring å®¹å™¨ï¼Œå°±ç±»ä¼¼äºå©šä»‹ç½‘ç«™ã€‚</p>
<p>ä¿¡æ¯éƒ½æ³¨å†Œåœ¨é‡Œé¢<br>ä½ æƒ³æŸ¥çœ‹ï¼ˆè·å–ï¼‰çš„æ—¶å€™å†æ‹¿<br>6ã€Springé…ç½®<br>6-1.åˆ«å</p>
<p>ApplicationContext ac &#x3D; new ClassPathXmlApplicationContext(â€œbean.xmlâ€);<br>User user &#x3D; (User)ac.getBean(â€œuser2â€);<br>user.show();</p>
<p>è¾“å‡ºï¼šcsnd_é—²è¨€<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>6-2.Beançš„é…ç½®<br>åˆ«åå¯ä»¥é€šè¿‡å¾ˆå¤šç§æ–¹å¼åˆ†å‰²</p>
<p>ç©ºæ ¼åˆ†å‰²<br>é€—å·åˆ†å‰²<br>åˆ†å·åˆ†å‰²</p>
<p>&#x2F;&#x2F; User user &#x3D; (User)ac.getBean(â€œuserâ€);<br>&#x2F;&#x2F; User user &#x3D; (User)ac.getBean(â€œuser2â€);<br>&#x2F;&#x2F; User user &#x3D; (User)ac.getBean(â€œu2â€);<br>&#x2F;&#x2F; User user &#x3D; (User)ac.getBean(â€œu3â€);<br>User user &#x3D; (User)ac.getBean(â€œu4â€);<br>user.show();</p>
<p>è¾“å‡ºï¼šcsdn_é—²è¨€<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>6-3.import<br>â€ƒâ€ƒè¿™ä¸ªimportã€‚ä¸€èˆ¬ç”¨äºå›¢é˜Ÿå¼€å‘ä½¿ç”¨ï¼Œå®ƒå¯ä»¥å°†å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œå¯¼å…¥åˆå¹¶ä¸ºä¸€ä¸ªã€‚</p>
<p>â€ƒâ€ƒå‡è®¾ï¼Œç°åœ¨é¡¹ç›®ä¸­æœ‰å¤šä¸ªäººå¼€å‘ï¼Œè¿™ä¸‰ä¸ªäººè´Ÿè´£ä¸åŒçš„ç±»å¼€å‘ï¼Œä¸åŒçš„ç±»éœ€è¦æ³¨å†Œåœ¨ä¸åŒçš„beanä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨importå°†æ‰€æœ‰äººçš„beans.xmlåˆå¹¶ä¸ºä¸€ä¸ªæ€»çš„ï¼</p>
<p>å¼ ä¸‰<br>æå››<br>ç‹äº”</p>
<p>ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥ä½¿ç”¨æ€»çš„é…ç½®å°±å¯ä»¥äº†ã€‚</p>
<p>7ã€ä¾èµ–æ³¨å…¥<br>7-1.æ„é€ å™¨æ³¨å…¥<br>ç•¥</p>
<p>7-2.Set æ³¨å…¥<br>ä¾èµ–ï¼šbeanå¯¹è±¡çš„åˆ›å»ºä¾èµ–äºå®¹å™¨ï¼<br>æ³¨å…¥ï¼šbeanå¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§ï¼Œç”±å®¹å™¨æ¥æ³¨å…¥ï¼</p>
<p>Addressç±»</p>
<p>public class Address {<br>private String address;<br>çœç•¥setter<br>}<br>1<br>2<br>3<br>4<br>studentç±»</p>
<p>public class Student {</p>
<figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs delphi"><span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> <span class="hljs-keyword">name</span>;<br><span class="hljs-keyword">private</span> Address address;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span>[] books;<br><span class="hljs-keyword">private</span> List&lt;<span class="hljs-keyword">String</span>&gt; hobbies;<br><span class="hljs-keyword">private</span> Map&lt;<span class="hljs-keyword">String</span>,<span class="hljs-keyword">String</span>&gt; card;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">Set</span>&lt;<span class="hljs-keyword">String</span>&gt; games;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> wife;<br><span class="hljs-keyword">private</span> Properties info;<br>çœç•¥setter<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;address&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.bloghut.domain.Address&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;address&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;csdn_é—²è¨€&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;student&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.bloghut.domain.Student&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--æ³¨å…¥address ç±»å‹--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;address&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;address&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--String ç±»å‹--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;csdn_é—²è¨€&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--String ç±»å‹--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;books&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>JavaSE<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>JavaWeb<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Spring<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>SpringMVC<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--List--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobbies&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>å”±<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>è·³<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>rap<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>ç¯®çƒ<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--Map--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;card&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">map</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;é—²è¨€&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;csdnâ€”â€”é—²è¨€&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;é—²è¨€åšå®¢&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;csdnâ€”â€”é—²è¨€â€”â€”åšå®¢&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">map</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--set--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;games&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>å”±<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>è·³<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>rap<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>ç¯®çƒ<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--String--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;wife&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;xxx&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--Properties--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;info&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">props</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;p1&quot;</span>&gt;</span>v1<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;p2&quot;</span>&gt;</span>v2<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;p3&quot;</span>&gt;</span>v3<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">props</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 æµ‹è¯•</p>
<p>public static void main(String[] args) {<br>ApplicationContext ac &#x3D; new ClassPathXmlApplicationContext(â€œbean.xmlâ€);<br>Student student &#x3D; (Student)ac.getBean(â€œstudentâ€);<br>System.out.println(student);<br>}<br>1<br>2<br>3<br>4<br>5<br>è¾“å‡º</p>
<p>Student{<br>name&#x3D;â€™csdn_é—²è¨€â€™,<br>address&#x3D;Address{address&#x3D;â€™csdn_é—²è¨€â€™},<br>books&#x3D;[JavaSE, JavaWeb, Spring, SpringMVC, Mybatis],<br>hobbies&#x3D;[å”±, è·³, rap, ç¯®çƒ],<br>card&#x3D;{é—²è¨€&#x3D;csdnâ€”â€”é—²è¨€, é—²è¨€åšå®¢&#x3D;csdnâ€”â€”é—²è¨€â€”â€”åšå®¢},<br>games&#x3D;[å”±, è·³, rap, ç¯®çƒ],<br>wife&#x3D;â€™xxxâ€™,<br>info&#x3D;{p3&#x3D;v3, p2&#x3D;v2, p1&#x3D;v1}<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10</p>
<h2 id="8ã€æ‹“å±•æ–¹å¼æ³¨å…¥-å¯ä»¥ä½¿ç”¨på‘½åç©ºé—´å’Œcå‘½åç©ºé—´è¿›è¡Œæ³¨å…¥"><a href="#8ã€æ‹“å±•æ–¹å¼æ³¨å…¥-å¯ä»¥ä½¿ç”¨på‘½åç©ºé—´å’Œcå‘½åç©ºé—´è¿›è¡Œæ³¨å…¥" class="headerlink" title="8ã€æ‹“å±•æ–¹å¼æ³¨å…¥ å¯ä»¥ä½¿ç”¨på‘½åç©ºé—´å’Œcå‘½åç©ºé—´è¿›è¡Œæ³¨å…¥"></a>8ã€æ‹“å±•æ–¹å¼æ³¨å…¥ å¯ä»¥ä½¿ç”¨<strong>på‘½åç©ºé—´</strong>å’Œ<strong>cå‘½åç©ºé—´</strong>è¿›è¡Œæ³¨å…¥</h2><p>p å‘½åç©ºé—´å¯¹åº” setter æ–¹å¼æ³¨å…¥ï¼ˆè¦æä¾›setæ–¹æ³•ï¼‰<br>c å‘½ä»¤ç©ºé—´å¯¹åº” æ„é€ æ–¹æ³• ï¼ˆè¦æä¾›æœ‰å‚æ„é€ æ–¹æ³•ï¼‰</p>
<p>1 2 3 4 5 6 7 8 9 10 bean.xml</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;bean <span class="hljs-attribute">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-string">&quot;cn.bloghut.domain.User&quot;</span> p:<span class="hljs-attribute">name</span>=<span class="hljs-string">&quot;é—²è¨€&quot;</span> p:<span class="hljs-attribute">age</span>=<span class="hljs-string">&quot;18&quot;</span>/&gt;<br>&lt;bean <span class="hljs-attribute">id</span>=<span class="hljs-string">&quot;user2&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-string">&quot;cn.bloghut.domain.User&quot;</span> c:<span class="hljs-attribute">name</span>=<span class="hljs-string">&quot;csdnâ€”â€”é—²è¨€&quot;</span> c:<span class="hljs-attribute">age</span>=<span class="hljs-string">&quot;19&quot;</span> /&gt;<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>1 2 3 4 5 6 7 8 9 10 11 12 13 pojp</p>
<p>public class User {<br>private String name;<br>private int age;</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-built_in">public</span> <span class="hljs-keyword">User</span>() &#123;<br>&#125;<br><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">User</span>(String <span class="hljs-type">name</span>, <span class="hljs-type">int</span> age) &#123;<br>    this.name = <span class="hljs-type">name</span>;<br>    this.age = age;<br>&#125;<br>çœç•¥setter<br><br><span class="hljs-type">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>æµ‹è¯•</p>
<p>ApplicationContext ac &#x3D; new ClassPathXmlApplicationContext(â€œuserbeans.xmlâ€);<br>User user &#x3D; (User)ac.getBean(â€œuserâ€);<br>User user2 &#x3D; (User)ac.getBean(â€œuser2â€);<br>System.out.println(user);<br>System.out.println(user2);<br>1<br>2<br>3<br>4<br>5<br>è¾“å‡º</p>
<p>User{name&#x3D;â€™é—²è¨€â€™, age&#x3D;18}<br>User{name&#x3D;â€™csdnâ€”â€”é—²è¨€â€™, age&#x3D;19}<br>1<br>2<br>9ã€beançš„ä½œç”¨åŸŸ</p>
<p>9-1.å•ä¾‹æ¨¡å¼ï¼ˆSpring é»˜è®¤æœºåˆ¶ï¼‰<br>scope&#x3D;â€singletonâ€</p>
<p>User user2 &#x3D; (User)ac.getBean(â€œuser2â€);<br>User user3 &#x3D; (User)ac.getBean(â€œuser2â€);<br>System.out.println(user2.hashCode());<br>System.out.println(user3.hashCode());<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>è¾“å‡º</p>
<p>817406040<br>817406040<br>1<br>2<br>9-2.åŸå‹æ¨¡å¼ï¼šæ¯æ¬¡ä»å®¹å™¨ä¸­getçš„æ—¶å€™ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°å¯¹è±¡</p>
<p>ApplicationContext ac &#x3D; new ClassPathXmlApplicationContext(â€œuserbeans.xmlâ€);<br>for (int i &#x3D; 0;i&lt; 5;i++){<br>System.out.println(ac.getBean(â€œuserâ€).hashCode());<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>è¾“å‡º</p>
<p>817406040<br>1955915048<br>1270855946<br>2083117811<br>157683534<br>1<br>2<br>3<br>4<br>5<br>å•çº¿ç¨‹â€”å•ä¾‹<br>å¤šçº¿ç¨‹â€”å¤šä¾‹</p>
<p>10.Beançš„è‡ªåŠ¨è£…é…<br>è‡ªåŠ¨è£…é…æ˜¯Spring æ»¡è¶³beanä¾èµ–çš„ä¸€ç§æ–¹å¼ï¼<br>Spring ä¼šåœ¨ä¸Šä¸‹æ–‡è‡ªåŠ¨å¯»æ‰¾ï¼Œå¹¶è‡ªåŠ¨ç»™bean è£…é…å±æ€§ï¼</p>
<p>åœ¨Spring ä¸­æœ‰ä¸‰ç§è£…é…çš„æ–¹å¼</p>
<p>åœ¨xml ä¸­æ˜¾ç¤ºçš„é…ç½®<br>åœ¨javaä¸­æ˜¾ç¤ºé…ç½®<br>éšå¼ çš„è‡ªåŠ¨è£…é…beanã€é‡è¦ã€‘<br>ByNameæ–¹æ³•è‡ªåŠ¨è£…é…</p>
<p>autowire&#x3D;â€œbyNameâ€<br>ä¼šè‡ªåŠ¨åœ¨å®¹å™¨ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡setæ–¹æ³•åé¢çš„å€¼å¯¹åº”çš„bean idï¼<br>å¼Šç«¯ï¼šset æ–¹æ³•åé¢çš„å€¼å’Œ id ç›¸åŒ<br>bean.xml</p>
<p>1 2 3 4 5 6 7 8 9 10 æµ‹è¯•</p>
<p>public static void main(String[] args) {</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">ApplicationContext ac = <span class="hljs-keyword">new</span> <span class="hljs-constructor">ClassPathXmlApplicationContext(<span class="hljs-string">&quot;bean.xml&quot;</span>)</span>;<br>People people = ac.get<span class="hljs-constructor">Bean(<span class="hljs-string">&quot;people&quot;</span>, People.<span class="hljs-params">class</span>)</span>;<br><br>people.get<span class="hljs-constructor">Cat()</span>.shout<span class="hljs-literal">()</span>;<br>people.get<span class="hljs-constructor">Dog()</span>.shout<span class="hljs-literal">()</span>;<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>ByNameæ–¹æ³•è‡ªåŠ¨è£…é…</p>
<p>autowire&#x3D;â€œbyTypeâ€<br>ä¼šè‡ªåŠ¨åœ¨å®¹å™¨ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡å±æ€§ç±»å‹ç›¸åŒçš„bean<br>å¼Šç«¯ï¼šå®ƒå¿…é¡»ä¿è¯ç±»å‹å…¨å±€å”¯ä¸€ï¼ˆåœ¨IOCå®¹å™¨ä¸­åªèƒ½ç”±ä¸€ä¸ªï¼‰ã€‚</p>
<p>&lt;!â€“<br>byTypeï¼šä¼šè‡ªåŠ¨åœ¨å®¹å™¨ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡å±æ€§ç±»å‹ç›¸åŒçš„bean</p>
<p>â€“&gt;</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>æµ‹è¯•</p>
<p>public static void main(String[] args) {</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">ApplicationContext ac = <span class="hljs-keyword">new</span> <span class="hljs-constructor">ClassPathXmlApplicationContext(<span class="hljs-string">&quot;bean.xml&quot;</span>)</span>;<br>People people = ac.get<span class="hljs-constructor">Bean(<span class="hljs-string">&quot;people&quot;</span>, People.<span class="hljs-params">class</span>)</span>;<br><br>people.get<span class="hljs-constructor">Cat()</span>.shout<span class="hljs-literal">()</span>;<br>people.get<span class="hljs-constructor">Dog()</span>.shout<span class="hljs-literal">()</span>;<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>æ€»ç»“ï¼š</p>
<p>â€ƒâ€ƒbyNameçš„æ—¶å€™ï¼Œéœ€è¦ä¿è¯æ‰€æœ‰beançš„idå”¯ä¸€ï¼Œå¹¶ä¸”è¿™ä¸ªbeanéœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„setæ–¹æ³•çš„å€¼ä¸€è‡´<br>â€ƒâ€ƒbyTypeçš„æ—¶å€™ï¼Œéœ€è¦ä¿è¯æ‰€æœ‰beançš„classå”¯ä¸€ï¼Œå¹¶ä¸”è¿™ä¸ªbeanéœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„ç±»å‹ä¸€è‡´</p>
<p>11ã€æ³¨è§£å®ç°è‡ªåŠ¨è£…é…<br>jdk1.5æ”¯æŒçš„æ³¨è§£ Spring2.5æ”¯æŒçš„æ³¨è§£</p>
<p>The introduction of annotation-based configuration raised the question of whether this approach is â€œbetterâ€ than XML</p>
<p>@Autowired</p>
<p>@Quelifier</p>
<p>@Resource</p>
<p>xmlå¤´æ–‡ä»¶çº¦æŸ</p>
<p><a href="context:annotation-config/">context:annotation-config&#x2F;</a></p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>11-1.@Autowired<br>åœ¨å±æ€§ä¸Šä½¿ç”¨<br>åœ¨setæ–¹å¼ä¸Šä½¿ç”¨<br>ä½¿ç”¨Autowired å¯ä»¥ä¸ç”¨ç¼–å†™setæ–¹æ³•äº†ï¼Œå‰ææ˜¯ä½ è¿™ä¸ªè‡ªåŠ¨è£…é…çš„å±æ€§åœ¨IOCï¼ˆSpringï¼‰å®¹å™¨ä¸­å­˜åœ¨ï¼ˆéœ€è¦é€šè¿‡å…¶ä»–æ–¹å¼æ³¨å…¥è¿›å®¹å™¨ï¼‰ï¼Œä¸”ç¬¦åˆåå­—byNameã€‚<br>public class People {<br>@Autowired<br>private Dog dog;</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs arduino">@Autowired<br><span class="hljs-keyword">private</span> Cat cat;<br><span class="hljs-keyword">private</span> <span class="hljs-type">String</span> name;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">People</span><span class="hljs-params">()</span> </span>&#123;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">People</span><span class="hljs-params">(Dog dog, Cat cat, <span class="hljs-type">String</span> name)</span> </span>&#123;<br>    <span class="hljs-keyword">this</span>.dog = dog;<br>    <span class="hljs-keyword">this</span>.cat = cat;<br>    <span class="hljs-keyword">this</span>.name = name;<br>&#125;<br>çœç•¥setter<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>Autowired æœ‰ä¸€ä¸ªä¸ªå”¯ä¸€çš„å±æ€§ï¼ˆ required ï¼‰</p>
<p>@Target({ElementType.CONSTRUCTOR, ElementType.METHOD, ElementType.PARAMETER, ElementType.FIELD, ElementType.ANNOTATION_TYPE})<br>@Retention(RetentionPolicy.RUNTIME)<br>@Documented<br>public @interface Autowired {<br>boolean required() default true;<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>@Nullable<br>â€ƒâ€ƒå­—æ®µæ ‡è®°äº†è¿™ä¸ªæ³¨è§£ï¼Œè¡¨ç¤ºè¿™ä¸ªå­—æ®µå¯ä»¥ä¸ºnull</p>
<p>@Qualifier</p>
<p>å½“æˆ‘ä»¬çš„å®¹å™¨å­˜åœ¨å¤šä¸ªç›¸åŒç±»å‹ï¼Œä¸åŒåç§°çš„beanã€‚ä½¿ç”¨@Autowired æ— æ³•å®Œæˆè‡ªåŠ¨è£…é…äº†<br>è¿™ä¸ªæ—¶å€™éœ€è¦ä½¿ç”¨@Qualifier å’Œ@Autowired æ³¨è§£ä¸€èµ·ä½¿ç”¨ã€‚<br>ä½¿ç”¨@Qualifier æŒ‡å®šä¸€ä¸ªå”¯ä¸€çš„beanå¯¹è±¡æ³¨å…¥ï¼<br>ä¾‹å¦‚<br>IOCå®¹å™¨ä¸­å­˜åœ¨å¤šä¸ª ç›¸åŒç±»å‹ä¸åŒidçš„bean</p>
<p>é€šè¿‡@Qualifier æŒ‡å®šä¸€ä¸ªå”¯ä¸€çš„bean</p>
<p>æµ‹è¯•</p>
<p>11-2.@Resource<br>â€ƒâ€ƒä¸æŒ‡å®šnameå€¼ï¼Œå…ˆå»åˆ¤æ–­byNameå’ŒbyTypeï¼Œæœ‰ä¸€ä¸ªèƒ½æ³¨å…¥å³æˆåŠŸ</p>
<p>æ ¹æ®ç±»å‹æŸ¥æ‰¾</p>
<p>11-3.æ ¹æ®ç±»å‹å’ŒidæŸ¥æ‰¾<br>å¦‚æœIOCå®¹å™¨ä¸­å­˜åœ¨å¤šä¸ªä¸åŒåç§°ï¼Œç›¸åŒç±»å‹çš„beanï¼Œå¯ä»¥é€šè¿‡@Resourceæ³¨è§£çš„nameå±æ€§æŒ‡å®šå”¯ä¸€çš„idï¼›</p>
<p>æ€»ç»“ï¼š</p>
<p>éƒ½æ˜¯ç”¨æ¥è‡ªåŠ¨è£…é…çš„ï¼Œéƒ½å¯ä»¥æ”¾åœ¨<em>å±æ€§å­—æ®µ</em>ä¸Š<br>@Autowiredé€šè¿‡byTypeï¼ˆç±»å‹ï¼‰çš„æ–¹å¼å®ç°ï¼Œè€Œä¸”å¿…é¡»è¦æ±‚è¿™ä¸ªå¯¹è±¡å­˜åœ¨ï¼<br>@Resourceé»˜è®¤é€šè¿‡byNameï¼ˆidï¼‰çš„æ–¹å¼å®ç°ï¼Œå¦‚æœæ‰¾ä¸åˆ°åå­—ï¼Œåˆ™é€šè¿‡byTypeå®ç°ï¼å¦‚æœä¸¤ä¸ªéƒ½æ‰¾ä¸åˆ°çš„æƒ…å†µä¸‹ï¼Œå°±æŠ¥é”™ï¼<br>æ‰§è¡Œé¡ºåºä¸åŒï¼š@Autowiredé€šè¿‡byTypeçš„æ–¹å¼å®ç°ã€‚@Resourceé»˜è®¤é€šè¿‡byNameçš„æ–¹å¼å®ç°ã€‚<br>12ã€ä½¿ç”¨æ³¨è§£å¼€å‘<br>åœ¨Spring4ä¹‹åï¼Œè¦ä½¿ç”¨æ³¨è§£å¼€å‘ï¼Œå¿…é¡»ä¿è¯aopçš„åŒ…å¯¼å…¥äº†</p>
<p>ä½¿ç”¨æ³¨è§£éœ€è¦å¯¼å…¥contextçº¦æŸï¼Œå¢åŠ æ³¨è§£çš„æ”¯æŒï¼</p>
<p>&lt;context:component-scan base-package&#x3D;â€cn.bloghutâ€&#x2F;&gt;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¼€å¯æ³¨è§£æ”¯æŒ--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span><br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 beanæ³¨å…¥ä½¿ç”¨@Componetæ³¨è§£</p>
<p>ç­‰ä»·äº</p>
<p>@Component<br>public class User {</p>
<p>}<br>1<br>2<br>3<br>4<br>å±æ€§æ³¨å…¥ä½¿ç”¨@Valueæ³¨è§£</p>
<p>@Component public class User {</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> name;<br><br><span class="hljs-meta">@Value</span>(<span class="hljs-string">&quot;é—²è¨€&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span>  <span class="hljs-title function_">setName</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>)&#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>&#125;<br><br><span class="hljs-variable constant_">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>è¡ç”Ÿæ³¨è§£</p>
<p>@Componetæœ‰å‡ ä¸ªè¡ç”Ÿæ³¨è§£ï¼Œåœ¨webå¼€å‘ä¸­ï¼Œä¼šæŒ‰ç…§mvcä¸‰å±‚æ¶æ„åˆ†å±‚ï¼<br>@Serviceâ€”â€”â€“ä¸šåŠ¡å±‚æ³¨è§£<br>@Repositoryâ€”æŒä¹…å±‚æ³¨è§£<br>@Controllerâ€”â€“æ§åˆ¶å±‚æ³¨è§£<br>è¿™å››ä¸ªæ³¨è§£åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ä»£è¡¨å°†æŸä¸ªç±»æ³¨å†Œåˆ°Springä¸­ï¼Œè£…é…Bean</p>
<p>è‡ªåŠ¨è£…é…</p>
<p>@Autowired è‡ªåŠ¨è£…é…é€šè¿‡ç±»å‹ã€åå­—<br>å¦‚æœAutowiredä¸èƒ½å”¯ä¸€è‡ªåŠ¨è£…é…ä¸Šå±æ€§ï¼Œåˆ™éœ€è¦é€šè¿‡@Qualifier(value&#x3D;â€œxxxâ€)<br>@Nullable å­—æ®µæ ‡è®°äº†è¿™ä¸ªæ³¨è§£ï¼Œè¯´æ˜è¿™ä¸ªå­—æ®µå¯ä»¥ä¸ºnull<br>@Resource è‡ªåŠ¨è£…é…é€šè¿‡åå­—ï¼Œç±»å‹<br>ä½œç”¨åŸŸ</p>
<p>@Scope(â€œsingletonâ€)å•ä¾‹<br>1</p>
<p>æ€»ç»“</p>
<p>XML ä¸ æ³¨è§£</p>
<p>xmlæ›´åŠ ä¸‡èƒ½ï¼Œé€‚ç”¨äºä»»ä½•åœºåˆï¼ç»´æŠ¤ç®€å•æ–¹ä¾¿<br>æ³¨è§£ä¸æ˜¯è‡ªå·±ç±»ä½¿ç”¨ä¸äº†ï¼Œ ç»´æŠ¤ç›¸å¯¹å¤æ‚<br>XML ä¸ æ³¨è§£æœ€ä½³å®è·µ</p>
<p>xmlç”¨æ¥ç®¡ç†bean<br>æ³¨è§£åªè´Ÿè´£å®Œæˆå±æ€§çš„æ³¨å…¥<br>æˆ‘ä»¬åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œåªéœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼šå¿…é¡»è®©æ³¨è§£ç”Ÿæ•ˆï¼Œå°±éœ€è¦å¼€å¯æ³¨è§£çš„æ”¯æŒ</p>
<p>&lt;context:component-scan base-package&#x3D;â€cn.bloghutâ€&#x2F;&gt;</p>
<p><a href="context:annotation-config/">context:annotation-config&#x2F;</a><br>1<br>2<br>3<br>4<br>5<br>13ã€javaçš„æ–¹å¼é…ç½®Spring<br>â€ƒâ€ƒJavaConfig æ˜¯Springçš„ ä¸€ä¸ªå­é¡¹ç›®ï¼Œåœ¨Spring 4ä¹‹åï¼Œå®ƒæˆä¸ºäº†æ–°åŠŸèƒ½</p>
<p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªç±»ï¼Œåœ¨ç±»ä¸Šæ·»åŠ @Componentæ³¨è§£ï¼Œè®©å®ƒåŠ è½½åˆ°Spring IOCå®¹å™¨ï¼ˆè®©Spring ç®¡ç†ï¼‰<br>å®šä¹‰Java é…ç½®ç±»ï¼Œåœ¨å…¶ç±»ä¸Šæ·»åŠ @Configuration æ³¨è§£ï¼Œè¯´æ˜è¯¥ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œè¿™ä¸ªç±»ä¹Ÿä¼šè¢«Spring æ‰˜ç®¡ï¼Œå› ä¸ºå®ƒæœ¬èº«æ˜¯ä¸€ä¸ª@Component<br>åœ¨Myconfig ç±»ä¸­ æ·»åŠ getUser æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªuserå¯¹è±¡<br>getUser æ–¹æ³•ä¸Šçš„@Bean æ³¨è§£ åˆ™æ˜¯æ³¨å†Œä¸€ä¸ªbeanåŠŸèƒ½ï¼Œç›¸å½“äº</p>
<p>1<br>æ–¹æ³•çš„åå­—ï¼Œç›¸å½“äºbean æ ‡ç­¾ä¸­çš„id å±æ€§ã€‚<br>æ–¹æ³•çš„è¿”å›å€¼ï¼Œç›¸å½“äºbean æ ‡ç­¾ä¸­çš„classå±æ€§ã€‚ï¼ˆå› ä¸ºæˆ‘ä»¬å¯¼åŒ…äº†ï¼ŒSpring çŸ¥é“æ˜¯å“ªä¸€ä¸ªï¼‰<br>å¦‚æœå®Œå…¨ä½¿ç”¨äº†é…ç½®ç±»æ–¹å¼å»åšï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡AnnotationConfigApplicationContext ä¸Šä¸‹æ–‡æ¥è·å–å®¹å™¨ï¼Œé€šè¿‡é…ç½®ç±»çš„class å¯¹è±¡åŠ è½½ï¼</p>
<p>å®Œæ•´ä»£ç </p>
<p>@Configuration è¿™ä¸ªä¸€ä¸ªé…ç½®ç±»<br>@ComponentScan ç”¨äºæ‰«æåŒ…<br>@Import ç”¨äºå¯¼å…¥å…¶ä»–é…ç½®ç±»<br>13-1.ä¸»é…ç½®ç±»<br>@Configuration<br>@ComponentScan(basePackages &#x3D; {â€œcn.bloghut.domainâ€})<br>@Import({MyConfig2.class})<br>public class MyConfig {</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è¿”å›ä¸€ä¸ªUser Bean</span><br><span class="hljs-comment"> * @return</span><br><span class="hljs-comment"> */</span><br>@Bean<br><span class="hljs-built_in">public</span> <span class="hljs-keyword">User</span> getUser()&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">new</span> <span class="hljs-keyword">User</span>();<br>&#125;<br><br><span class="hljs-type">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>13-2.é…ç½®ç±»2<br>@Configuration<br>public class MyConfig2 {</p>
<p>}<br>1<br>2<br>3<br>4<br>5<br>13-3.Userå®ä½“ç±»<br>@Component<br>public class User {<br>private String name;</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getName</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> name;<br>&#125;<br><span class="hljs-meta">@Value</span>(<span class="hljs-string">&quot;é—²è¨€&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setName</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">toString</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;User&#123;&quot;</span> +<br>            <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>            <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>&#125;<br><br><span class="hljs-variable constant_">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>13-4.æµ‹è¯•ç±»<br>public class MyTest {<br>public static void main(String[] args) {</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">    ApplicationContext ac = <span class="hljs-built_in">new</span> AnnotationConfigApplicationContext(MyConfig.<span class="hljs-keyword">class</span>);<br>    <span class="hljs-keyword">User</span> <span class="hljs-keyword">user</span> = ac.getBean(&quot;getUser&quot;, <span class="hljs-keyword">User</span>.<span class="hljs-keyword">class</span>);<br>    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">user</span>);<br><br>&#125;<br><br><span class="hljs-type">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>14ã€ä»£ç†æ¨¡å¼<br>14-1.è§’è‰²åˆ†æï¼š<br>æŠ½è±¡è§’è‰²ï¼šä¸€èˆ¬ä¼šä½¿ç”¨æ¥å£æˆ–è€…æŠ½è±¡ç±»æ¥è§£å†³<br>çœŸå®è§’è‰²ï¼šè¢«ä»£ç†çš„è§’è‰²<br>ä»£ç†è§’è‰²ï¼šä»£ç† çœŸå®è§’è‰²ï¼Œä»£ç†çœŸå®è§’è‰²åï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šåšä¸€äº›é™„å±æ“ä½œ<br>å®¢æˆ·ï¼šè®¿é—®ä»£ç†å¯¹è±¡çš„äºº<br>ä»£ç æ­¥éª¤ï¼š</p>
<p>14-2.æ¥å£<br>public interface Rent {<br>&#x2F;**<br>* ç§Ÿæˆ¿<br>*&#x2F;<br>void rent();<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>14-3.çœŸå®è§’è‰²<br>public class Host implements Rent{</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs csharp">@Override<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rent</span>()</span> &#123;<br>    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;æˆ¿ä¸œè¦å‡ºç§Ÿæˆ¿å­&quot;</span>);<br>&#125;<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>14-4.ä»£ç†è§’è‰²<br>public class Proxy implements Rent{</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">private</span> Host host;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Proxy</span>()</span> &#123;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Proxy</span>(<span class="hljs-params">Host host</span>)</span> &#123;<br>    <span class="hljs-keyword">this</span>.host = host;<br>&#125;<br><br>@Override<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rent</span>()</span> &#123;<br>    seeHouse();<br>    host.rent();<br>    fare();<br>    hetong();<br>&#125;<br><span class="hljs-comment">//çœ‹æˆ¿</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">seeHouse</span>()</span>&#123;<br>    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;ä¸­ä»‹å¸¦ä½ çœ‹æˆ¿&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//æ”¶ä¸­ä»‹è´¹</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">fare</span>()</span>&#123;<br>    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;æ”¶ä¸­ä»‹è´¹&quot;</span>);<br>&#125;<br><span class="hljs-comment">//ç­¾åˆåŒ</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">hetong</span>()</span>&#123;<br>    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;ç­¾åˆåŒ&quot;</span>);<br>&#125;<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>14-5.å®¢æˆ·ç«¯è®¿é—®ä»£ç†è§’è‰²<br>public class Client {<br>public static void main(String[] args) {</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">    Host host = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Host()</span>;<br>    <span class="hljs-comment">//ä»£ç†,ä¸­ä»‹å¸®æˆ¿ä¸œï¼Œä½†æ˜¯å‘¢ï¼Ÿä»£ç†è§’è‰²ä¸€èˆ¬ä¼šæœ‰ä¸€äº›é™„å±æ“ä½œï¼</span><br>    Proxy proxy = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Proxy(<span class="hljs-params">host</span>)</span>;<br>    <span class="hljs-comment">//ä½ ä¸ç”¨é¢å¯¹æˆ¿ä¸œï¼Œç›´æ¥æ‰¾ä¸­ä»‹ç§Ÿæˆ¿å³å¯ï¼</span><br>    proxy.rent<span class="hljs-literal">()</span>;<br>&#125;<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>14-6.ä»£ç†æ¨¡å¼çš„å¥½å¤„ï¼š<br>å¯ä»¥ä½¿çœŸå®è§’è‰²çš„æ“ä½œæ›´åŠ å­˜ç²¹ï¼ä¸ç”¨å»å…³æ³¨ä¸€äº›å…¬å…±çš„ä¸šåŠ¡<br>\2. å…¬å…±äº¤ç»™äº†ä»£ç†è§’è‰²ï¼Œå®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥<br>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•çš„æ—¶å€™ï¼Œæ–¹ä¾¿é›†ä¸­ç®¡ç†<br>14-7.ç¼ºç‚¹ï¼š<br>ä¸€ä¸ªçœŸå®è§’è‰²å°±ä¼šäº§ç”Ÿä¸€ä¸ªä»£ç†è§’è‰²ï¼Œä»£ç é‡ä¼šç¿»å€ å¼€å‘æ•ˆç‡å˜ä½</p>
<p>15ã€é™æ€ä»£ç†<br>æœ‰ä¸€å¤©ï¼Œå…¬å¸é¢†å¯¼è¦æ±‚æˆ‘ä¸º æŸä¸ªç±»çš„æ‰€æœ‰æ–¹æ³•æ–°å¢æ—¥å¿—è¾“å‡ºåŠŸèƒ½ã€‚<br>æ€ä¹ˆåšå‘¢ï¼Ÿ<br>åœ¨åŸæ¥çš„ç±»ä¸Šçš„æ¯ä¸€ä¸ªæ–¹æ³•æ·»åŠ æ—¥å¿—è¾“å‡ºï¼Ÿ<br>è¿™å°±æ˜¯æ”¹å˜åŸæ¥äººå®¶çš„ä»£ç äº†ã€‚<br>æ”¹åŠ¨åŸæœ‰çš„ä¸šåŠ¡ä»£ç ï¼Œåœ¨å…¬å¸ä¸­æ˜¯å¤§å¿Œï¼<br>æœ‰å¯èƒ½äººå®¶ä½ ä¿®æ”¹äº†äººå®¶çš„ä»£ç ï¼Œå¯èƒ½ç»™æ”¹è¹¦äº†ã€‚<br>æ–°å¢ä¸€ä¸ªç±»ï¼Œåˆ¶ä½œæˆæœ¬å°ï¼ŒèŒè´£å•ä¸€ã€‚<br>åŸæ¥çš„å¼€å‘æ–¹å¼ï¼ˆçºµå‘å¼€å‘ï¼‰</p>
<p>æ·»åŠ æ—¥å¿—åŠŸèƒ½ï¼ˆæ¨ªåˆ‡è¿›å»ï¼‰</p>
<p>ä»£ç å¦‚ä¸‹ï¼š<br>ä¸šåŠ¡æ¥å£ï¼š</p>
<p>public interface UserService {<br>void add();</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">delete</span>()</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update</span>()</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">query</span>()</span>;<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>åŸæ¥ä¸šåŠ¡ç±»</p>
<p>public class UserServiceImpl implements UserService {<br>@Override<br>public void add() {<br>System.out.println(â€œæ–°å¢ç”¨æˆ·â€);<br>}</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs csharp">@Override<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span>()</span> &#123;<br>    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;åˆ é™¤ç”¨æˆ·&quot;</span>);<br>&#125;<br><br>@Override<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span>()</span> &#123;<br>    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;ä¿®æ”¹ç”¨æˆ·&quot;</span>);<br>&#125;<br><br>@Override<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">query</span>()</span> &#123;<br>    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;æŸ¥è¯¢ç”¨æˆ·&quot;</span>);<br>&#125;<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>ä»£ç†ç±»</p>
<p>public class UserServiceProxy implements UserService {</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">private</span> <span class="hljs-title class_">UserService</span> userService;<br><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setUserService</span>(<span class="hljs-params">UserService userService</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">userService</span> = userService;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;add&quot;</span>);<br>    userService.<span class="hljs-title function_">add</span>();<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">delete</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;delete&quot;</span>);<br>    userService.<span class="hljs-title function_">delete</span>();<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">update</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;update&quot;</span>);<br>    userService.<span class="hljs-title function_">update</span>();<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">query</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;query&quot;</span>);<br>    userService.<span class="hljs-title function_">query</span>();<br>&#125;<br><br><span class="hljs-comment">//æ—¥å¿—æ–¹æ³•</span><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">log</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> msg</span>)&#123;<br>    <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;ã€Debug ã€‘ä½¿ç”¨äº†&quot;</span>+msg+<span class="hljs-string">&quot;æ–¹æ³•&quot;</span>);<br>&#125;<br><br><span class="hljs-variable constant_">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>æµ‹è¯•ç±»</p>
<p>public static void main(String[] args) {</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">UserServiceProxy userService <span class="hljs-operator">=</span> new UserServiceProxy()<span class="hljs-comment">;</span><br>userService.setUserService(new UserServiceImpl())<span class="hljs-comment">;</span><br>userService.add()<span class="hljs-comment">;</span><br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>16ã€åŠ¨æ€ä»£ç†<br>åŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†è§’è‰²ä¸€æ ·<br>åŠ¨æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œä¸æ˜¯æˆ‘ä»¬ç›´æ¥å†™å¥½çš„<br>åŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤å¤§ç±»ï¼šåŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†ï¼ŒåŸºäºç±»çš„åŠ¨æ€ä»£ç†<br>åŸºäºæ¥å£ï¼šJDKåŠ¨æ€ä»£ç†<br>åŸºäºç±»ï¼š cglib<br>javaå­—èŠ‚ç å®ç°ï¼š javasist<br>éœ€è¦äº†è§£ä¸¤ä¸ªç±»ï¼šProxy ï¼šä»£ç† InvocationHandlerï¼šè°ƒç”¨å¤„ç†ç¨‹åº</p>
<p>java.lang.reflect.Proxy<br>1<br>â€ƒâ€ƒProxyæä¾›äº†åˆ›å»ºåŠ¨æ€ä»£ç†ç±»å’Œå®ä¾‹çš„é™æ€æ–¹æ³•ï¼Œå®ƒä¹Ÿæ˜¯ç”±è¿™äº›æ–¹æ³•åˆ›å»ºçš„æ‰€æœ‰åŠ¨æ€ä»£ç†ç±»çš„è¶…ç±»ã€‚(å¤§ç™½è¯ï¼šè¿™æ˜¯ä¸€ä¸ªé™æ€ç±»ï¼Œç±»é‡Œè¾¹æœ‰æ–¹æ³•å¾—åˆ°ä»£ç†ç±»)</p>
<p>â€ƒâ€ƒåŠ¨æ€ä»£ç†ç±» ï¼ˆä»¥ä¸‹ç®€ç§°ä¸ºä»£ç†ç±» ï¼‰æ˜¯ä¸€ä¸ªå®ç°åœ¨ç±»åˆ›å»ºæ—¶åœ¨è¿è¡Œæ—¶æŒ‡å®šçš„æ¥å£åˆ—è¡¨çš„ç±»ï¼Œå…·æœ‰å¦‚ä¸‹æ‰€è¿°çš„è¡Œä¸ºã€‚ ä»£ç†æ¥å£æ˜¯ç”±ä»£ç†ç±»å®ç°çš„æ¥å£ã€‚ ä»£ç†å®ä¾‹æ˜¯ä»£ç†ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚ æ¯ä¸ªä»£ç†å®ä¾‹éƒ½æœ‰ä¸€ä¸ªå…³è”çš„è°ƒç”¨å¤„ç†ç¨‹åºå¯¹è±¡ï¼Œå®ƒå®ç°äº†æ¥å£</p>
<p>â€ƒâ€ƒé€šè¿‡å…¶ä»£ç†æ¥å£ä¹‹ä¸€çš„ä»£ç†å®ä¾‹ä¸Šçš„æ–¹æ³•è°ƒç”¨å°†è¢«åˆ†æ´¾åˆ°å®ä¾‹è°ƒç”¨å¤„ç†ç¨‹åºçš„invokeæ–¹æ³•ï¼Œä¼ é€’ä»£ç†å®ä¾‹ï¼Œ java.lang.reflect.Methodè¢«è°ƒç”¨æ–¹æ³•çš„java.lang.reflect.Methodå¯¹è±¡ä»¥åŠåŒ…å«å‚æ•°çš„ç±»å‹Object Objectçš„æ•°ç»„ã€‚ è°ƒç”¨å¤„ç†ç¨‹åºé€‚å½“åœ°å¤„ç†ç¼–ç æ–¹æ³•è°ƒç”¨ï¼Œå¹¶ä¸”è¿”å›çš„ç»“æœå°†ä½œä¸ºæ–¹æ³•åœ¨ä»£ç†å®ä¾‹ä¸Šè°ƒç”¨çš„ç»“æœè¿”å›ã€‚</p>
<p>ä»£ç†ç±»å…·æœ‰ä»¥ä¸‹å±æ€§ï¼š</p>
<p>ä»£ç†ç±»æ˜¯å…¬å…±çš„ï¼Œæœ€ç»ˆçš„ï¼Œè€Œä¸æ˜¯æŠ½è±¡çš„ï¼Œå¦‚æœæ‰€æœ‰ä»£ç†æ¥å£éƒ½æ˜¯å…¬å…±çš„ã€‚<br>å¦‚æœä»»ä½•ä»£ç†æ¥å£æ˜¯éå…¬å¼€çš„ï¼Œä»£ç†ç±»æ˜¯éå…¬å¼€çš„ï¼Œæœ€ç»ˆçš„ï¼Œè€Œä¸æ˜¯æŠ½è±¡çš„ ã€‚<br>ä»£ç†ç±»çš„ä¸åˆæ ¼åç§°æœªæŒ‡å®šã€‚ ç„¶è€Œï¼Œä»¥å­—ç¬¦ä¸²â€$Proxyâ€å¼€å¤´çš„ç±»åç©ºé—´åº”è¯¥ä¿ç•™ç»™ä»£ç†ç±»ã€‚<br>ä¸€ä¸ªä»£ç†ç±»æ‰©å±•äº†java.lang.reflect.Proxy ã€‚<br>ä»£ç†ç±»å®Œå…¨æŒ‰ç…§ç›¸åŒçš„é¡ºåºå®ç°å…¶åˆ›å»ºæ—¶æŒ‡å®šçš„æ¥å£ã€‚<br>å¦‚æœä¸€ä¸ªä»£ç†ç±»å®ç°ä¸€ä¸ªéå…¬å…±æ¥å£ï¼Œé‚£ä¹ˆå®ƒå°†è¢«å®šä¹‰åœ¨ä¸è¯¥æ¥å£ç›¸åŒçš„åŒ…ä¸­ã€‚ å¦åˆ™ï¼Œä»£ç†ç±»çš„åŒ…ä¹Ÿæ˜¯æœªæŒ‡å®šçš„ã€‚ è¯·æ³¨æ„ï¼Œç¨‹åºåŒ…å¯†å°ä¸ä¼šé˜»æ­¢åœ¨è¿è¡Œæ—¶åœ¨ç‰¹å®šç¨‹åºåŒ…ä¸­æˆåŠŸå®šä¹‰ä»£ç†ç±»ï¼Œå¹¶ä¸”ç±»ä¹Ÿä¸ä¼šç”±åŒä¸€ç±»åŠ è½½å™¨å®šä¹‰ï¼Œå¹¶ä¸”ä¸ç‰¹å®šç­¾åè€…å…·æœ‰ç›¸åŒçš„åŒ…ã€‚<br>ç”±äºä»£ç†ç±»å®ç°äº†åœ¨å…¶åˆ›å»ºæ—¶æŒ‡å®šçš„æ‰€æœ‰æ¥å£ï¼Œ getInterfacesåœ¨å…¶ç±»å¯¹è±¡ä¸Šè°ƒç”¨getInterfaceså°†è¿”å›ä¸€ä¸ªåŒ…å«ç›¸åŒåˆ—è¡¨æ¥å£çš„æ•°ç»„ï¼ˆæŒ‰å…¶åˆ›å»ºæ—¶æŒ‡å®šçš„é¡ºåºï¼‰ï¼Œåœ¨å…¶ç±»å¯¹è±¡ä¸Šè°ƒç”¨getMethodså°†è¿”å›ä¸€ä¸ªæ•°ç»„çš„æ–¹æ³•å¯¹è±¡ï¼Œå…¶ä¸­åŒ…æ‹¬è¿™äº›æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¹¶è°ƒç”¨getMethodå°†åœ¨ä»£ç†æ¥å£ä¸­æ‰¾åˆ°å¯ä»¥é¢„æœŸçš„æ–¹æ³•ã€‚<br>Proxy.isProxyClassæ–¹æ³•å°†è¿”å›trueï¼Œå¦‚æœå®ƒé€šè¿‡ä»£ç†ç±» - ç”±Proxy.getProxyClassè¿”å›çš„ç±»æˆ–ç”±Proxy.newProxyInstanceè¿”å›çš„å¯¹è±¡çš„ç±» - å¦åˆ™ä¸ºfalseã€‚<br>æ‰€è¿°java.security.ProtectionDomainä»£ç†ç±»çš„æ˜¯ç›¸åŒç”±å¼•å¯¼ç±»è£…è½½ç¨‹åºè£…è½½ç³»ç»Ÿç±»ï¼Œå¦‚java.lang.Object ï¼Œå› ä¸ºæ˜¯ç”±å—ä¿¡ä»»çš„ç³»ç»Ÿä»£ç ç”Ÿæˆä»£ç†ç±»çš„ä»£ç ã€‚ æ­¤ä¿æŠ¤åŸŸé€šå¸¸å°†è¢«æˆäºˆjava.security.AllPermission ã€‚<br>æ¯ä¸ªä»£ç†ç±»æœ‰ä¸€ä¸ªå…¬å…±æ„é€ ä¸€ä¸ªå‚æ•°ï¼Œè¯¥æ¥å£çš„å®ç°InvocationHandler ï¼Œè®¾ç½®è°ƒç”¨å¤„ç†ç¨‹åºçš„ä»£ç†å®ä¾‹ã€‚ è€Œä¸å¿…ä½¿ç”¨åå°„APIæ¥è®¿é—®å…¬å…±æ„é€ å‡½æ•°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨Proxy.newProxyInstanceæ–¹æ³•æ¥åˆ›å»ºä»£ç†å®ä¾‹ï¼Œè¯¥æ–¹æ³•å°†è°ƒç”¨Proxy.getProxyClassçš„æ“ä½œä¸è°ƒç”¨å¤„ç†ç¨‹åºä¸€èµ·è°ƒç”¨æ„é€ å‡½æ•°ã€‚<br>17ã€åŸºäºProxyç±»å’ŒInvocationHandler å®ç°åŠ¨æ€ä»£ç†<br>17-1.çœŸå®çš„è§’è‰²<br>public class Host implements Rent{</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rent</span>()</span> &#123;<br>    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;ç§Ÿæˆ¿&quot;</span>);<br>&#125;<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>17-2.è¢«ä»£ç†çš„æ¥å£<br>public interface Rent {</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">rent</span>()</span>;<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>17-3.ä»£ç† çœŸå®çš„è§’è‰² ProxyInvocationHandler<br>public class ProxyInvocationHandler implements InvocationHandler {</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">//è¢«ä»£ç†çš„æ¥å£</span><br><span class="hljs-keyword">private</span> <span class="hljs-title class_">Rent</span> rent;<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setRent</span>(<span class="hljs-params">Rent rent</span>)&#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rent</span> = rent;<br>&#125;<br><span class="hljs-comment">//ç”Ÿæˆå¾—åˆ°ä»£ç†ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-title class_">Object</span> <span class="hljs-title function_">getProxy</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span>  <span class="hljs-title class_">Proxy</span>.<span class="hljs-title function_">newProxyInstance</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getClass</span>().<span class="hljs-title function_">getClassLoader</span>(),rent.<span class="hljs-title function_">getClass</span>().<span class="hljs-title function_">getInterfaces</span>(),<span class="hljs-variable language_">this</span>);<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å¤„ç†ä»£ç†å®ä¾‹ï¼Œå¹¶è¿”å›ç»“æœ</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> <span class="hljs-variable">proxy</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> <span class="hljs-variable">method</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> <span class="hljs-variable">args</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@throws</span> <span class="hljs-variable">Throwable</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-title class_">Object</span> <span class="hljs-title function_">invoke</span>(<span class="hljs-title class_">Object</span> proxy, <span class="hljs-title class_">Method</span> method, <span class="hljs-title class_">Object</span>[] args) throws <span class="hljs-title class_">Throwable</span> &#123;<br>    <span class="hljs-comment">//åŠ¨æ€ä»£ç†çš„æœ¬è´¨ï¼Œå°±æ˜¯ä½¿ç”¨åå°„æœºåˆ¶</span><br>    <span class="hljs-comment">//åœ¨æ–¹æ³•è°ƒç”¨å‰è°ƒç”¨</span><br>    <span class="hljs-title function_">seeHouse</span>();<br>    <span class="hljs-title class_">Object</span> result = method.<span class="hljs-title function_">invoke</span>(rent,args);<br>    <span class="hljs-comment">//åœ¨æ–¹æ³•è°ƒç”¨åè°ƒç”¨</span><br>    <span class="hljs-title function_">heTong</span>();<br>    <span class="hljs-keyword">return</span> result;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">seeHouse</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;çœ‹æˆ¿å­&quot;</span>);<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">heTong</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;ç­¾åˆåŒ&quot;</span>);<br>&#125;<br><br><span class="hljs-variable constant_">TEXT</span><br></code></pre></td></tr></table></figure>

<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>}</p>
<p>17-4.ç”¨æˆ·<br>public class Client {<br>public static void main(String[] args) {<br>&#x2F;&#x2F;åˆ›å»ºçœŸå®è§’è‰²<br>Host host &#x3D; new Host();<br>&#x2F;&#x2F;åˆ›å»ºä»£ç†è§’è‰² ä¸å­˜åœ¨<br>ProxyInvocationHandler proxyInvocationHandler &#x3D; new ProxyInvocationHandler();<br>&#x2F;&#x2F;è®¾ç½®è¦ä»£ç†çš„å¯¹è±¡<br>proxyInvocationHandler.setRent(host);<br>&#x2F;&#x2F;è·å–ä»£ç†å¯¹è±¡ï¼Œå¹¶å¼ºåˆ¶è½¬æ¢<br>Rent proxy &#x3D; (Rent)proxyInvocationHandler.getProxy();<br>&#x2F;&#x2F;è°ƒç”¨<br>proxy.rent();<br>}<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>17-5.è¾“å‡ºç»“æœ<br>çœ‹æˆ¿å­<br>ç§Ÿæˆ¿<br>ç­¾åˆåŒ<br>1<br>2<br>3<br>18ã€åŸºäºProxyç±»å’ŒInvocationHandler å®ç°åŠ¨æ€ä»£ç† 2<br>Proxyï¼šç”ŸæˆåŠ¨æ€ä»£ç†å®ä¾‹çš„<br>InvocationHandlerï¼šè°ƒç”¨å¤„ç†ç¨‹åºå¹¶è¿”å›ç»“æœçš„</p>
<p>ä¸‡èƒ½çš„è‡ªåŠ¨ç”Ÿæˆä»£ç†ç±»</p>
<p>package cn.bloghut.demo3;</p>
<p>import java.lang.reflect.InvocationHandler;<br>import java.lang.reflect.Method;<br>import java.lang.reflect.Proxy;</p>
<p>&#x2F;**</p>
<ul>
<li><p>@Classname ProxyInvocationHandler</p>
</li>
<li><p>@Description è‡ªåŠ¨ç”Ÿæˆä»£ç†ç±»</p>
</li>
<li><p>@Date 2021&#x2F;5&#x2F;17 15:44</p>
</li>
<li><p>@Created by é—²è¨€<br>*&#x2F;<br>public class ProxyInvocationHandler implements InvocationHandler {</p>
<p>&#x2F;&#x2F;1.è¢«ä»£ç†çš„æ¥å£<br>public Object target;</p>
<p>public void setTarget(Object target){<br>this.target &#x3D; target;<br>}</p>
<p>&#x2F;&#x2F;2.ç”Ÿæˆå¾—åˆ°ä»£ç†ç±»ï¼ˆä»£ç†è°ï¼‰<br>public Object getProxy(){<br>return Proxy.newProxyInstance(this.getClass().getClassLoader(),<br>target.getClass().getInterfaces(),this);<br>}</p>
<p>&#x2F;&#x2F;3.å¤„ç†ä»£ç†å®ä¾‹ï¼Œå¹¶è¿”å›ç»“æœï¼ˆä»£ç”¨ä»£ç†ç¨‹åºï¼‰<br>public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {<br>&#x2F;&#x2F;åŠ¨æ€è·å–æ–¹æ³•åç§°<br>log(method.getName());<br>Object result &#x3D; method.invoke(target, args);<br>return result;<br>}<br>&#x2F;**</p>
<ul>
<li>æ‰“å°æ—¥å¿—æ–¹æ³•</li>
<li>@param msg<br>*&#x2F;<br>public void log(String msg){<br>System.out.println(â€œ[debug]&#x3D;&#x3D;&#x3D;&gt; æ‰§è¡Œå¯â€+msg+â€æ–¹æ³•â€);<br>}</li>
</ul>
</li>
</ul>
<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>public static void main(String[] args) {</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//çœŸå®è§’è‰²</span><br>UserServiceImpl userService = <span class="hljs-keyword">new</span> <span class="hljs-constructor">UserServiceImpl()</span>;<br><span class="hljs-comment">//ä»£ç†è§’è‰²ï¼Œä¸å­˜åœ¨</span><br>ProxyInvocationHandler invocationHandler = <span class="hljs-keyword">new</span> <span class="hljs-constructor">ProxyInvocationHandler()</span>;<br><span class="hljs-comment">//è®¾ç½®è¦ä»£ç†çš„å¯¹è±¡</span><br>invocationHandler.set<span class="hljs-constructor">Target(<span class="hljs-params">userService</span>)</span>;<br><span class="hljs-comment">//è·å–ä»£ç†å¯¹è±¡</span><br>UserService proxy = (UserService)invocationHandler.get<span class="hljs-constructor">Proxy()</span>;<br><span class="hljs-comment">//æ‰§è¡Œæ–¹æ³•</span><br>proxy.query<span class="hljs-literal">()</span>;<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>[debug]&#x3D;&#x3D;&#x3D;&gt; æ‰§è¡Œå¯queryæ–¹æ³•<br>query<br>1<br>2<br>19ã€åŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†æ€»ç»“<br>19-1.é™æ€ä»£ç†<br>ç”±ç¨‹åºå‘˜åˆ›å»ºæˆ–ç”±ç‰¹å®šå·¥å…·è‡ªåŠ¨ç”Ÿæˆæºä»£ç ï¼Œå†å¯¹å…¶ç¼–è¯‘ã€‚åœ¨ç¨‹åºè¿è¡Œå‰ï¼Œä»£ç†ç±»çš„.classæ–‡ä»¶å°±å·²ç»å­˜åœ¨äº†<br>é™æ€ä»£ç†é€šå¸¸åªä»£ç†ä¸€ä¸ªç±»<br>é™æ€ä»£ç†äº‹å…ˆçŸ¥é“è¦ä»£ç†çš„æ˜¯ä»€ä¹ˆ<br>ä»£ç å¦‚ä¸‹ï¼š</p>
<p>å¦‚ä¸‹ï¼Œ HelloServiceProxyç±»æ˜¯ä»£ç†ç±»ï¼ŒHelloServiceImplç±»æ˜¯å§”æ‰˜ç±»ï¼Œè¿™ä¸¤ä¸ªç±»éƒ½å®ç°äº†HelloServiceæ¥å£ã€‚<br>å…¶ä¸­HelloServiceImplç±»æ˜¯HelloServiceæ¥å£çš„çœŸæ­£å®ç°è€…ï¼Œè€ŒHelloServiceProxyç±»æ˜¯é€šè¿‡è°ƒç”¨HelloServiceImplç±»çš„ç›¸å…³æ–¹æ³•æ¥æä¾›ç‰¹å®šæœåŠ¡çš„ã€‚<br>HelloServiceProxyç±»çš„echo()æ–¹æ³•å’ŒgetTime()æ–¹æ³•ä¼šåˆ†åˆ«è°ƒç”¨è¢«ä»£ç†çš„HelloServiceImplå¯¹è±¡çš„echo()æ–¹æ³•å’ŒgetTime()æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨æ–¹æ³•è°ƒç”¨å‰åéƒ½ä¼šæ‰§è¡Œä¸€äº›ç®€å•çš„æ‰“å°æ“ä½œã€‚<br>ç”±æ­¤å¯è§ï¼Œä»£ç†ç±»å¯ä»¥ä¸ºå§”æ‰˜ç±»é¢„å¤„ç†æ¶ˆæ¯ã€æŠŠæ¶ˆæ¯è½¬å‘ç»™å§”æ‰˜ç±»å’Œäº‹åå¤„ç†æ¶ˆæ¯ç­‰ã€‚<br>HelloServiceæ¥å£</p>
<p>public interface HelloService {<br>String echo(String msg);</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs scss">Date <span class="hljs-built_in">getTime</span>();<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}</p>
<p>HelloServiceImplå§”æ‰˜ç±»<br>public class HelloServiceImpl implements HelloService {<br>@Override<br>public String echo(String msg) {<br>return â€œecho:â€ + msg;<br>}</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-title class_">Date</span> <span class="hljs-title function_">getTime</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();<br>&#125;<br><br><span class="hljs-variable constant_">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>HelloServiceProxyä»£ç†ç±»</p>
<p>public class HelloServiceProxy implements HelloService {</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">//è¡¨ç¤ºè¢«ä»£ç†çš„HelloService å®ä¾‹</span><br><span class="hljs-keyword">private</span> <span class="hljs-title class_">HelloService</span> helloService;<br><br><span class="hljs-keyword">public</span> <span class="hljs-title class_">HelloServiceProxy</span>(<span class="hljs-title class_">HelloService</span> helloService) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">helloService</span> = helloService;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setHelloServiceProxy</span>(<span class="hljs-params">HelloService helloService</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">helloService</span> = helloService;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">echo</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> msg</span>) &#123;<br>    <span class="hljs-comment">//é¢„å¤„ç†</span><br>    <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;before calling echo()&quot;</span>);<br>    <span class="hljs-comment">//è°ƒç”¨è¢«ä»£ç†çš„HelloService å®ä¾‹çš„echo()æ–¹æ³•</span><br>    <span class="hljs-title class_">String</span> result = helloService.<span class="hljs-title function_">echo</span>(msg);<br>    <span class="hljs-comment">//äº‹åå¤„ç†</span><br>    <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;after calling echo()&quot;</span>);<br>    <span class="hljs-keyword">return</span> result;<br>&#125;<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-title class_">Date</span> <span class="hljs-title function_">getTime</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">//é¢„å¤„ç†</span><br>    <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;before calling getTime()&quot;</span>);<br>    <span class="hljs-comment">//è°ƒç”¨è¢«ä»£ç†çš„HelloService å®ä¾‹çš„getTime()æ–¹æ³•</span><br>    <span class="hljs-title class_">Date</span> date = helloService.<span class="hljs-title function_">getTime</span>();<br>    <span class="hljs-comment">//äº‹åå¤„ç†</span><br>    <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;after calling getTime()&quot;</span>);<br>    <span class="hljs-keyword">return</span> date;<br>&#125;<br><br><span class="hljs-variable constant_">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>æµ‹è¯•</p>
<p>public class Test {<br>public static void main(String[] args) {<br>&#x2F;&#x2F;åˆ›å»ºå§”æ‰˜ç±»<br>HelloServiceImpl helloService &#x3D; new HelloServiceImpl();<br>&#x2F;&#x2F;åˆ›å»ºä»£ç†ç±»<br>HelloServiceProxy helloServiceProxy &#x3D; new HelloServiceProxy(helloService);<br>&#x2F;&#x2F;è°ƒç”¨æ–¹æ³•<br>Date time &#x3D; helloServiceProxy.getTime();<br>System.out.println(time);<br>}<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>19-2.åŠ¨æ€ä»£ç†<br>åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œè¿ç”¨åå°„æœºåˆ¶åŠ¨æ€åˆ›å»ºè€Œæˆ<br>åŠ¨æ€ä»£ç†æ˜¯ä»£ç†ä¸€ä¸ªæ¥å£ä¸‹çš„å¤šä¸ªå®ç°ç±»<br>åŠ¨æ€ä»£ç†ä¸çŸ¥é“è¦ä»£ç†ä»€ä¹ˆä¸œè¥¿ï¼Œåªæœ‰åœ¨è¿è¡Œæ—¶æ‰çŸ¥é“<br>â€ƒâ€ƒä¸é™æ€ä»£ç†ç±»å¯¹ç…§çš„æ˜¯åŠ¨æ€ä»£ç†ç±»ï¼ŒåŠ¨æ€ä»£ç†ç±»çš„å­—èŠ‚ç åœ¨ç¨‹åºè¿è¡Œæ—¶ç”±Javaåå°„æœºåˆ¶åŠ¨æ€ç”Ÿæˆï¼Œæ— éœ€ç¨‹åºå‘˜æ‰‹å·¥ç¼–å†™å®ƒçš„æºä»£ç ã€‚åŠ¨æ€ä»£ç†ç±»ä¸ä»…ç®€åŒ–äº†ç¼–ç¨‹å·¥ä½œï¼Œè€Œä¸”æé«˜äº†è½¯ä»¶ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ï¼Œå› ä¸ºJavaåå°„æœºåˆ¶å¯ä»¥ç”Ÿæˆä»»æ„ç±»å‹çš„åŠ¨æ€ä»£ç†ç±»ã€‚java.lang.reflect åŒ…ä¸­çš„Proxyç±»å’ŒInvocationHandleræ¥å£æä¾›äº†ç”ŸæˆåŠ¨æ€ä»£ç†ç±»çš„èƒ½åŠ›ã€‚</p>
<p>â€ƒâ€ƒProxyç±»æä¾›äº†åˆ›å»ºåŠ¨æ€ä»£ç†ç±»åŠå…¶å®ä¾‹çš„é™æ€æ–¹æ³•ã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<p>public static void main(String[] args) {</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//çœŸå®è§’è‰²</span><br>HelloServiceImpl helloService = <span class="hljs-keyword">new</span> <span class="hljs-constructor">HelloServiceImpl()</span>;<br><span class="hljs-comment">//ä»£ç†è§’è‰²  ä¸å­˜åœ¨</span><br>ProxyInvocationHandler proxyInvocationHandler = <span class="hljs-keyword">new</span> <span class="hljs-constructor">ProxyInvocationHandler()</span>;<br>proxyInvocationHandler.set<span class="hljs-constructor">Target(<span class="hljs-params">helloService</span>)</span>;<br>HelloService proxy = (HelloService)proxyInvocationHandler.get<span class="hljs-constructor">Proxy()</span>;<br><span class="hljs-comment">//æ‰§è¡Œæ–¹æ³•</span><br>String echo = proxy.echo(<span class="hljs-string">&quot;Proxy InvocationHandler å®ç°åŠ¨æ€ä»£ç†&quot;</span>);<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(echo);<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>è¾“å‡º</p>
<p>ä»£ç†æ–¹æ³•æ‰§è¡Œå‰è°ƒç”¨<br>ä»£ç†æ–¹æ³•æ‰§è¡Œåè°ƒç”¨<br>echo:Proxy InvocationHandler å®ç°åŠ¨æ€ä»£ç†<br>1<br>2<br>3<br>public class ProxyInvocationHandler implements InvocationHandler {</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">//è¦ä»£ç†çš„ç±»</span><br><span class="hljs-keyword">private</span> <span class="hljs-title class_">Object</span> target;<br><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setTarget</span>(<span class="hljs-params"><span class="hljs-built_in">Object</span> target</span>)&#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">target</span> = target;<br>&#125;<br><br><span class="hljs-comment">//è·å–è¦ä»£ç†çš„å®ä¾‹</span><br><span class="hljs-keyword">public</span> <span class="hljs-title class_">Object</span> <span class="hljs-title function_">getProxy</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Proxy</span>.<span class="hljs-title function_">newProxyInstance</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getClass</span>().<span class="hljs-title function_">getClassLoader</span>(),target.<span class="hljs-title function_">getClass</span>().<span class="hljs-title function_">getInterfaces</span>(),<span class="hljs-variable language_">this</span>);<br>&#125;<br><br><span class="hljs-comment">//æ‰§è¡Œä»£ç†çš„æ–¹æ³•</span><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-title class_">Object</span> <span class="hljs-title function_">invoke</span>(<span class="hljs-title class_">Object</span> proxy, <span class="hljs-title class_">Method</span> method, <span class="hljs-title class_">Object</span>[] args) throws <span class="hljs-title class_">Throwable</span> &#123;<br>    <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;ä»£ç†æ–¹æ³•æ‰§è¡Œå‰è°ƒç”¨&quot;</span>);<br>    <span class="hljs-comment">//æ‰§è¡Œæ–¹æ³•</span><br>    <span class="hljs-title class_">Object</span> result = method.<span class="hljs-title function_">invoke</span>(target, args);<br>    <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;ä»£ç†æ–¹æ³•æ‰§è¡Œåè°ƒç”¨&quot;</span>);<br><br>    <span class="hljs-keyword">return</span> result;<br>&#125;<br><br><span class="hljs-variable constant_">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>20ã€ä»€ä¹ˆæ˜¯Aop<br>â€ƒâ€ƒAOPï¼ˆAspect Oriented Programmingï¼‰æ„ä¸ºï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œé€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ï¼ŒAOPæ˜¯OOPçš„å»¶ç»­ï¼Œæ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ç§è¡ç”Ÿæ³›å‹ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚</p>
<p>20-1.Aopåœ¨Springä¸­çš„ä½œç”¨<br>æä¾›å£°æ˜äº‹åŠ¡ï¼šå…è®¸ç”¨æˆ·è‡ªå®šä¹‰åˆ‡é¢</p>
<p>æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼šè·¨è¶Šåº”ç”¨ç¨‹åºå¤šä¸ªæ¨¡å—çš„æ–¹æ³•æˆ–åŠŸèƒ½ã€‚å³ä¸æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘æ— å…³çš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„éƒ¨åˆ†ï¼Œå°±æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚å¦‚æ—¥å¿—ï¼Œå®‰å…¨ï¼Œç¼“å­˜ï¼Œäº‹åŠ¡ç­‰ç­‰ã€‚ã€‚ã€‚<br>åˆ‡é¢ï¼ˆASPECTï¼‰ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹ è¢«æ¨¡å—åŒ–çš„ç‰¹æ®Šå¯¹è±¡ã€‚å³ å®ƒæ˜¯ä¸€ä¸ªç±»<br>é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šåˆ‡é¢å¿…é¡»è¦å®Œæˆçš„å·¥ä½œï¼Œå³ ä»–æ˜¯ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•<br>ç›®æ ‡ï¼ˆtargetï¼‰ï¼šè¢«é€šçŸ¥çš„å¯¹è±¡<br>ä»£ç†ï¼ˆProxyï¼‰ï¼šå‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ä¹‹ååˆ›å»ºçš„å¯¹è±¡<br>åˆ‡å…¥ç‚¹ï¼ˆPointCutï¼‰ï¼šåˆ‡é¢é€šçŸ¥ æ‰§è¡Œçš„â€åœ°ç‚¹â€çš„å®šä¹‰<br>è¿æ¥ç‚¹ï¼ˆjointPointï¼‰ï¼šä¸åˆ‡å…¥ç‚¹åŒ¹é…çš„æ‰§è¡Œç‚¹</p>
<p>Spring Aopä¸­ï¼Œé€šè¿‡Adviceå®šä¹‰æ¨ªåˆ‡é€»è¾‘ï¼ŒSpringä¸­æ”¯æŒçš„5ç§ç±»å‹çš„Advice</p>
<p>21ã€Aop å®ç°æ–¹å¼1-åŸºäºåŸç”ŸAPI<br>21-1.å¯¼å…¥ä¾èµ–</p>
<p>org.aspectj<br>aspectjweaver<br>1.9.4</p>
<p>1<br>2<br>3<br>4<br>5<br>21-2.åœ¨æ‰§è¡ŒUserServiceå®ç°ç±»çš„æ‰€æœ‰æ–¹æ³•å‰ï¼Œå¢åŠ æ—¥å¿—åŠŸèƒ½<br>public class Log implements MethodBeforeAdvice {</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * @param method è¦æ‰§è¡Œçš„ç›®æ ‡å¯¹è±¡æ–¹æ³•</span><br><span class="hljs-comment"> * @param args å‚æ•°</span><br><span class="hljs-comment"> * @param target       ç›®æ ‡å¯¹è±¡</span><br><span class="hljs-comment"> * @throws Throwable</span><br><span class="hljs-comment"> */</span><br><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> <span class="hljs-keyword">before</span>(<span class="hljs-keyword">Method</span> <span class="hljs-keyword">method</span>, <span class="hljs-keyword">Object</span>[] args, <span class="hljs-keyword">Object</span> target) throws Throwable &#123;<br>    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(target.getClass().getName()+&quot; çš„ &quot;+<span class="hljs-keyword">method</span>.getName()+&quot;æ–¹æ³•æ‰§è¡Œäº†&quot;);<br>&#125;<br><br><span class="hljs-type">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>21-3.åœ¨æ‰§è¡ŒUserServiceå®ç°ç±»çš„æ‰€æœ‰æ–¹æ³•åï¼Œå¢åŠ æ—¥å¿—åŠŸèƒ½<br>public class AfterLog implements AfterReturningAdvice {</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * @param returnValue è¿”å›å€¼</span><br><span class="hljs-comment"> * @param method</span><br><span class="hljs-comment"> * @param args</span><br><span class="hljs-comment"> * @param target</span><br><span class="hljs-comment"> * @throws Throwable</span><br><span class="hljs-comment"> */</span><br><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> afterReturning(<span class="hljs-keyword">Object</span> returnValue, <span class="hljs-keyword">Method</span> <span class="hljs-keyword">method</span>, <span class="hljs-keyword">Object</span>[] args, <span class="hljs-keyword">Object</span> target) throws Throwable &#123;<br>    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;æ‰§è¡Œäº†&quot;+<span class="hljs-keyword">method</span>.getName()+&quot;æ–¹æ³•ï¼Œ è¿”å›ç»“æœä¸º&quot;+returnValue);<br>&#125;<br><br><span class="hljs-type">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>21-4.UserService æ¥å£<br>public interface UserService {<br>void add();</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">delete</span>()</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update</span>()</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">select</span>()</span>;<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>21-5.UserServiceImpl æ¥å£<br>public class UserServiceImpl implements UserService {<br>public void add() {<br>System.out.println(â€œaddâ€);<br>}</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> <span class="hljs-keyword">delete</span>() &#123;<br>    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;delete&quot;);<br>&#125;<br><br><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> <span class="hljs-keyword">update</span>() &#123;<br>    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;update&quot;);<br>&#125;<br><br><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> <span class="hljs-keyword">select</span>() &#123;<br>    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;select&quot;);<br>&#125;<br><br><span class="hljs-type">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>21-6.bean.xml æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--æ³¨å†Œbean--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.bloghut.service.UserServiceImpl&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;afterLog&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.bloghut.log.AfterLog&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;log&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.bloghut.log.Log&quot;</span>/&gt;</span><br><br><span class="hljs-comment">&lt;!--æ–¹å¼ä¸€ï¼Œä½¿ç”¨åŸç”Ÿçš„Api æ¥å£--&gt;</span><br><span class="hljs-comment">&lt;!--é…ç½®aop--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--1.é…ç½®åˆ‡å…¥ç‚¹  pointcut åˆ‡å…¥ç‚¹ expression è¡¨è¾¾å¼, execution(è¦æ‰§è¡Œçš„ä½ç½®!)--&gt;</span><br>    <span class="hljs-comment">&lt;!-- åˆ‡å…¥ç‚¹  åœ¨ä»€ä¹ˆåœ°æ–¹æ‰§è¡Œä½ çš„ä»£ç --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;pointcut&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;execution(* cn.bloghut.service.UserServiceImpl.*(..))&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!--æ‰§è¡Œç¯ç»•å¢åŠ ï¼--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:advisor</span> <span class="hljs-attr">advice-ref</span>=<span class="hljs-string">&quot;log&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointcut&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:advisor</span> <span class="hljs-attr">advice-ref</span>=<span class="hljs-string">&quot;afterLog&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointcut&quot;</span>/&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 21-7.æµ‹è¯•ç±» public class Test { public static void main(String[] args) {</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs abnf">    ApplicationContext ac <span class="hljs-operator">=</span> new ClassPathXmlApplicationContext(<span class="hljs-string">&quot;bean.xml&quot;</span>)<span class="hljs-comment">;</span><br>    //åŠ¨æ€ä»£ç† ä»£ç†çš„æ˜¯æ¥å£<br>    UserService userService <span class="hljs-operator">=</span> (UserService)ac.getBean(<span class="hljs-string">&quot;userService&quot;</span>)<span class="hljs-comment">;</span><br>    userService.add()<span class="hljs-comment">;</span><br><br>&#125;<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>21-7.è¾“å‡ºç»“æœ<br>cn.bloghut.service.UserServiceImpl çš„ addæ–¹æ³•æ‰§è¡Œäº†<br>add<br>æ‰§è¡Œäº†addæ–¹æ³•ï¼Œ è¿”å›ç»“æœä¸ºnull<br>1<br>2<br>3<br>22ã€Aop å®ç°æ–¹å¼2-åˆ‡é¢æ–¹å¼<br>é…ç½®æ–‡ä»¶<br>é…ç½®aop<br>é…ç½®åˆ‡å…¥ç‚¹<br>é…ç½®è‡ªå®šä¹‰åˆ‡é¢è¦å¼•ç”¨çš„ç±»<br>åœ¨å“ªä¸ªæ–¹æ³•é…ç½®<br>22-1.é…ç½®æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--æ³¨å†Œbean--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.bloghut.service.UserServiceImpl&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;diyPointCut&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.bloghut.diy.DiyPointCut&quot;</span>/&gt;</span><br><br><span class="hljs-comment">&lt;!--æ–¹å¼ä¸€ï¼Œä½¿ç”¨åŸç”Ÿçš„Api æ¥å£--&gt;</span><br><span class="hljs-comment">&lt;!--é…ç½®aop--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--1.é…ç½®åˆ‡å…¥ç‚¹  pointcut åˆ‡å…¥ç‚¹ expression è¡¨è¾¾å¼, execution(è¦æ‰§è¡Œçš„ä½ç½®!)--&gt;</span><br>    <span class="hljs-comment">&lt;!-- åˆ‡å…¥ç‚¹  åœ¨ä»€ä¹ˆåœ°æ–¹æ‰§è¡Œä½ çš„ä»£ç --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;pointcut&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;execution(* cn.bloghut.service.UserServiceImpl.*(..))&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!--è‡ªå®šåˆ‡é¢ ref è¦å¼•ç”¨çš„ç±»--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspect</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;aspect&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;diyPointCut&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--æ–¹æ³•æ‰§è¡Œå‰ methodï¼šåˆ‡å…¥çš„æ–¹æ³• pointcutï¼šåˆ‡å…¥ç‚¹ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:before</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;before&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointcut&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!--æ–¹æ³•æ‰§è¡Œå--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:after</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;after&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointcut&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">aop:aspect</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 22-2.è‡ªå®šä¹‰åˆ‡é¢ package cn.bloghut.diy;</p>
<p>&#x2F;**</p>
<ul>
<li><p>@Classname DiyPointCut</p>
</li>
<li><p>@Description TODO</p>
</li>
<li><p>@Date 2021&#x2F;5&#x2F;17 17:23</p>
</li>
<li><p>@Created by é—²è¨€<br>*&#x2F;<br>public class DiyPointCut {</p>
<p>public void before(){<br>System.out.println(â€œ&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;æ–¹æ³•æ‰§è¡Œä¹‹å‰&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;â€);<br>}</p>
<p>public void after(){<br>System.out.println(â€œ&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;æ–¹æ³•æ‰§è¡Œä¹‹å&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;â€);<br>}</p>
</li>
</ul>
<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>22-3.Usersevice æ¥å£<br>package cn.bloghut.service;</p>
<p>&#x2F;**</p>
<ul>
<li><p>@Classname UserService</p>
</li>
<li><p>@Description TODO</p>
</li>
<li><p>@Date 2021&#x2F;5&#x2F;17 16:51</p>
</li>
<li><p>@Created by é—²è¨€<br>*&#x2F;<br>public interface UserService {<br>void add();</p>
<p>void delete();</p>
<p>void update();</p>
<p>void select();</p>
</li>
</ul>
<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>22-4.UserServiceImpl å®ç°ç±»<br>package cn.bloghut.service;</p>
<p>&#x2F;**</p>
<ul>
<li><p>@Classname UserServiceImpl</p>
</li>
<li><p>@Description TODO</p>
</li>
<li><p>@Date 2021&#x2F;5&#x2F;17 16:51</p>
</li>
<li><p>@Created by é—²è¨€<br>*&#x2F;<br>public class UserServiceImpl implements UserService {<br>public void add() {<br>System.out.println(â€œaddâ€);<br>}</p>
<p>public void delete() {<br>System.out.println(â€œdeleteâ€);<br>}</p>
<p>public void update() {<br>System.out.println(â€œupdateâ€);<br>}</p>
<p>public void select() {<br>System.out.println(â€œselectâ€);<br>}</p>
</li>
</ul>
<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>22-5.æµ‹è¯•ç±»<br>package cn.bloghut.test;</p>
<p>import cn.bloghut.service.UserService;<br>import org.springframework.context.ApplicationContext;<br>import org.springframework.context.support.ClassPathXmlApplicationContext;</p>
<p>&#x2F;**</p>
<ul>
<li><p>@Classname Test2</p>
</li>
<li><p>@Description TODO</p>
</li>
<li><p>@Date 2021&#x2F;5&#x2F;17 17:24</p>
</li>
<li><p>@Created by é—²è¨€<br>*&#x2F;<br>public class Test2 {<br>public static void main(String[] args) {</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"> ApplicationContext ac = <span class="hljs-built_in">new</span> ClassPathXmlApplicationContext(&quot;bean2.xml&quot;);<br> UserService userService = ac.getBean(&quot;userService&quot;, UserService.<span class="hljs-keyword">class</span>);<br> userService.<span class="hljs-keyword">select</span>();<br><br><span class="hljs-type">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>22-6.è¾“å‡º<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;æ–¹æ³•æ‰§è¡Œä¹‹å‰&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>select<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;æ–¹æ³•æ‰§è¡Œä¹‹å&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>1<br>2<br>3<br>23ã€Aop å®ç°æ–¹å¼3-æ³¨è§£æ–¹å¼<br>23-1.beané…ç½®æ–‡ä»¶<br>æ³¨æ„å¼€å¯æ³¨è§£aopæ”¯æŒ<br><a href="aop:aspectj-autoproxy/">aop:aspectj-autoproxy&#x2F;</a></p>
<p><a href="aop:aspectj-autoproxy/">aop:aspectj-autoproxy&#x2F;</a></p>
</li>
</ul>
<p>1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23-2.è‡ªå®šä¹‰ç±» æ ‡æ³¨è¿™æ˜¯ä¸€ä¸ªåˆ‡é¢ @Aspect &#x2F;&#x2F;æ ‡æ³¨è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªåˆ‡é¢ public class AnnotationPointcut { &#x2F;** * å®šä¹‰åˆ‡å…¥ç‚¹ <em>&#x2F; @Pointcut(â€œexecution(</em> cn.bloghut.service.UserServiceImpl.*(..))â€) public void pointcut(){}</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">@<span class="hljs-keyword">Before</span>(&quot;pointcut()&quot;)<br><span class="hljs-built_in">public</span> <span class="hljs-type">void</span>  <span class="hljs-keyword">before</span>()&#123;<br>    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;=================æ–¹æ³•æ‰§è¡Œå‰=================&quot;);<br>&#125;<br><br>@<span class="hljs-keyword">After</span>(&quot;pointcut()&quot;)<br><span class="hljs-built_in">public</span> <span class="hljs-type">void</span>  <span class="hljs-keyword">after</span>()&#123;<br>    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;=================æ–¹æ³•æ‰§è¡Œå=================&quot;);<br>&#125;<br><br><span class="hljs-type">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>23-3.UserService ç±»ï¼š<br>public interface UserService {<br>void add();</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">delete</span>()</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update</span>()</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">select</span>()</span>;<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>23-4.UserServiceImpl ç±»<br>public class UserServiceImpl implements UserService {<br>public void add() {<br>System.out.println(â€œaddâ€);<br>}</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> <span class="hljs-keyword">delete</span>() &#123;<br>    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;delete&quot;);<br>&#125;<br><br><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> <span class="hljs-keyword">update</span>() &#123;<br>    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;update&quot;);<br>&#125;<br><br><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> <span class="hljs-keyword">select</span>() &#123;<br>    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;select&quot;);<br>&#125;<br><br><span class="hljs-type">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>23-5.æµ‹è¯•ç±»<br>public static void main(String[] args) {</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">ApplicationContext ac = <span class="hljs-built_in">new</span> ClassPathXmlApplicationContext(&quot;bean3.xml&quot;);<br>UserService userService = ac.getBean(&quot;userService&quot;, UserService.<span class="hljs-keyword">class</span>);<br>userService.<span class="hljs-keyword">delete</span>();<br><br><span class="hljs-type">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>23-6.è¾“å‡ºç»“æœ<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;æ–¹æ³•æ‰§è¡Œå‰&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>delete<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;æ–¹æ³•æ‰§è¡Œå&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>1<br>2<br>3<br>24ã€Spring æ•´åˆMybatis<br>24-1.å¯¼å…¥ä¾èµ–</p>
<p>junit<br>junit<br>4.13<br>test</p>
<p>mysql<br>mysql-connector-java<br>5.1.47</p>
<p>org.mybatis<br>mybatis<br>3.5.2</p>
<p>org.springframework<br>spring-webmvc<br>5.2.0.RELEASE</p>
<p>org.springframework<br>spring-jdbc<br>5.1.9.RELEASE</p>
<p>org.aspectj<br>aspectjweaver<br>1.9.4</p>
<p>org.aspectj<br>aspectjrt<br>1.8.13</p>
<p>org.mybatis<br>mybatis-spring<br>2.0.2</p>
<p>org.projectlombok<br>lombok<br>1.16.10</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>24-2.ç¼–å†™æ•°æ®æºé…ç½®</p>
<p>2.sqlSessionFactory</p>
<p>3.sqlSessionTemplate</p>
<p>1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 24-3.éœ€è¦ç»™æ¥å£åŠ å®ç°ç±»ã€ã€‘ public class UserMapperImpl implements UserMapper {</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">// æˆ‘ä»¬æ‰€æœ‰çš„æ“ä½œï¼Œéƒ½ä½¿ç”¨sqlSession æ¥æ‰§è¡Œï¼Œåœ¨åŸæ¥ï¼Œç°åœ¨éƒ½ä½¿ç”¨SQLSessionTemplate</span><br><br><span class="hljs-keyword">private</span> SqlSessionTemplate sqlSession;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setSqlSessionTemplate</span>(<span class="hljs-params">SqlSessionTemplate sqlSession</span>)</span>&#123;<br>    <span class="hljs-keyword">this</span>.sqlSession = sqlSession;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">findAll</span>()</span> &#123;<br>    <span class="hljs-keyword">return</span> sqlSession.getMapper(UserMapper.<span class="hljs-keyword">class</span>).findAll();<br>&#125;<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>24-4.å°†è‡ªå·±å†™çš„å®ç°ç±»ï¼Œæ³¨å…¥åˆ°å®¹å™¨ä¸­</p>
<p>1<br>2<br>3<br>24-5.æµ‹è¯•<br>@Test<br>public void test1(){<br>ApplicationContext ac &#x3D; new ClassPathXmlApplicationContext(â€œapplicationContext.xmlâ€);<br>UserMapper userMapper &#x3D; ac.getBean(â€œuserMapperâ€, UserMapper.class);<br>List all &#x3D; userMapper.findAll();<br>for (User user : all) {<br>System.out.println(user);<br>}<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>25ã€å£°æ˜å¼äº‹åŠ¡<br>25-1.ä»€ä¹ˆæ˜¯äº‹åŠ¡<br>äº‹åŠ¡ï¼šæŠŠä¸€ç»„ä¸šåŠ¡å½“æˆä¸€ä¸ªä¸šåŠ¡æ¥åšï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ï¼<br>äº‹åŠ¡åœ¨é¡¹ç›®å¼€å‘ä¸­ååˆ†çš„é‡è¦ï¼Œæ¶‰åŠåˆ°æ•°æ®çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œä¸èƒ½é©¬è™ï¼<br>ç¡®ä¿å®Œæ•´æ€§å’Œä¸€è‡´æ€§<br>25-2.äº‹åŠ¡ACID åŸåˆ™ï¼š<br>åŸåˆ™æ€§<br>ä¸€è‡´æ€§<br>éš”ç¦»æ€§<br>å¤šä¸ªä¸šåŠ¡å¯èƒ½æ“ä½œåŒä¸€ä¸ªèµ„æºï¼Œé˜²æ­¢æ•°æ®æŸå<br>æŒä¹…æ€§<br>äº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œæ— è®ºç³»ç»Ÿå‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Œç»“æœéƒ½ä¸ä¼šè¢«å½±å“ï¼Œè¢«æŒä¹…åŒ–çš„å†™åˆ°å­˜å‚¨å™¨ä¸­ï¼<br>25-3.ä¸ºä»€ä¹ˆéœ€è¦äº‹åŠ¡ï¼Ÿ<br>å¦‚æœä¸é…ç½®äº‹åŠ¡ï¼Œå¯èƒ½å­˜åœ¨æ•°æ®æäº¤ä¸ä¸€è‡´çš„æƒ…å†µä¸‹ï¼›<br>å¦‚æœæˆ‘ä»¬ä¸åœ¨Spring ä¸­å»é…ç½® å£°æ˜å¼äº‹åŠ¡ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨ä»£ç ä¸­æ‰‹åŠ¨é…ç½®äº‹åŠ¡<br>äº‹åŠ¡åœ¨é¡¹ç›®å¼€å‘ä¸­ååˆ†é‡è¦ï¼Œæ¶‰åŠåˆ°æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§é—®é¢˜ï¼Œä¸å®¹é©¬è™ï¼<br>26ã€å£°æ˜å¼äº‹åŠ¡ä»£ç <br>26-1.spring-dao.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    DataSourceï¼šä½¿ç”¨Spring çš„æ•°æ®æº æ›¿æ¢Mybatis çš„é…ç½® c3p0 dbcp druid</span><br><span class="hljs-comment">    ä½¿ç”¨Spring æä¾›çš„JDBC org.springframework.jdbc.datasource.</span><br><span class="hljs-comment">--&gt;</span><br><br><span class="hljs-comment">&lt;!--é…ç½®æ•°æ®æº--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClassName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--é…ç½®sqlSessionFactory å·¥å‚--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--ç»‘å®šmybatisçš„é…ç½®æ–‡ä»¶--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mapperLocations&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;classpath:cn/bloghut/mapper/*Mapper.xml&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--é…ç½®åˆ«å--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;typeAliases&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;cn.bloghut.domain.User&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--SqlSessionTemplate å°±æ˜¯sqlSession--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSession&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--åªèƒ½ä½¿ç”¨æ„é€ å™¨æ³¨å…¥sqlSessionFactoryï¼Œå› ä¸ºå®ƒæ²¡æœ‰ set æ–¹æ³•--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--==============================äº‹åŠ¡é…ç½®å¼€å§‹==============================--&gt;</span><br><br><span class="hljs-comment">&lt;!--é…ç½®å£°æ˜å¼äº‹åŠ¡--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;transactionManager&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--ç»“åˆAOP å®ç°äº‹åŠ¡çš„ç»‡å…¥--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">tx:advice</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;txAdvice&quot;</span> <span class="hljs-attr">transaction-manager</span>=<span class="hljs-string">&quot;transactionManager&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tx:attributes</span>&gt;</span><br>       <span class="hljs-comment">&lt;!--ç»™å“ªäº›æ–¹æ³•é…ç½®äº‹åŠ¡--&gt;</span><br>        <span class="hljs-comment">&lt;!--é…ç½®äº‹åŠ¡çš„ä¼ æ’­ç‰¹æ€§ï¼š</span><br><span class="hljs-comment">            propagation</span><br><span class="hljs-comment">            read-only=&quot;true&quot; åªè¯»</span><br><span class="hljs-comment">        --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;add&quot;</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRED&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;delete&quot;</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRED&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;update&quot;</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRED&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;find&quot;</span> <span class="hljs-attr">read-only</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br><br>        <span class="hljs-comment">&lt;!--ç»™æ‰€æœ‰æ–¹æ³•é…ç½®äº‹åŠ¡--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;*&quot;</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">&quot;REQUIRED&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tx:attributes</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">tx:advice</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--é…ç½®äº‹åŠ¡åˆ‡å…¥--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--é…ç½®åˆ‡å…¥ç‚¹--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;txPointcut&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;execution(* cn.bloghut.mapper.*.*(..))&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--åˆ‡å…¥äº‹åŠ¡--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:advisor</span> <span class="hljs-attr">advice-ref</span>=<span class="hljs-string">&quot;txAdvice&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;txPointcut&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--==============================äº‹åŠ¡é…ç½®ç»“æŸ==============================--&gt;</span><br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 26-2.applicationContext.xml</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;<span class="hljs-keyword">import</span> resource=&quot;spring-dao.xml&quot;/&gt;<br><br><span class="hljs-type">TEXT</span><br></code></pre></td></tr></table></figure>



<p>1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 26-3.user å®ä½“ç±» @Data @AllArgsConstructor @NoArgsConstructor public class User {</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;<br><span class="hljs-keyword">private</span> <span class="hljs-type">String</span> username;<br><span class="hljs-keyword">private</span> <span class="hljs-type">String</span> password;<br><span class="hljs-keyword">private</span> <span class="hljs-type">String</span> perms;<br><br>TEXT<br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>26-4.UserMaperæ¥å£<br>public interface UserMapper {</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">List&lt;<span class="hljs-keyword">User</span>&gt; findAll();<br><br><span class="hljs-type">int</span> <span class="hljs-keyword">add</span>(<span class="hljs-keyword">User</span> <span class="hljs-keyword">user</span>);<br><br><span class="hljs-type">int</span> <span class="hljs-keyword">delete</span>(<span class="hljs-type">int</span> id);<br><br><span class="hljs-type">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>26-5.UserMapperé…ç½®æ–‡ä»¶</p>
<p>â€‹     select * from user;   </p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;<span class="hljs-keyword">insert</span> id=&quot;add&quot; parameterType=&quot;cn.bloghut.domain.User&quot;&gt;<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">user</span>(username,<span class="hljs-keyword">password</span>,perms) <span class="hljs-keyword">values</span> (#&#123;username&#125;,#&#123;<span class="hljs-keyword">password</span>&#125;,#&#123;perms&#125;)<br>&lt;/<span class="hljs-keyword">insert</span>&gt;<br><br>&lt;<span class="hljs-keyword">delete</span> id=&quot;delete&quot; parameterType=&quot;int&quot;&gt;<br><span class="hljs-keyword">delete</span> form <span class="hljs-keyword">user</span> <span class="hljs-keyword">where</span> id = #&#123;<span class="hljs-keyword">value</span>&#125;<br>&lt;/<span class="hljs-keyword">delete</span>&gt;<br><br><span class="hljs-type">TEXT</span><br></code></pre></td></tr></table></figure>

<p>1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 26-6.UserMapper å®ç°ç±» public class UserMapperImpl implements UserMapper {</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">private SqlSessionTemplate sqlSession;<br><br><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> setSqlSession(SqlSessionTemplate sqlSession) &#123;<br>    this.sqlSession = sqlSession;<br>&#125;<br><br><span class="hljs-built_in">public</span> List&lt;<span class="hljs-keyword">User</span>&gt; findAll() &#123;<br>    UserMapper mapper = sqlSession.getMapper(UserMapper.<span class="hljs-keyword">class</span>);<br>    <span class="hljs-keyword">User</span> <span class="hljs-keyword">user</span> = <span class="hljs-built_in">new</span> <span class="hljs-keyword">User</span>();<br>    <span class="hljs-keyword">user</span>.setUsername(&quot;é—²è¨€&quot;);<br>    <span class="hljs-keyword">user</span>.setPassword(&quot;123&quot;);<br>    <span class="hljs-keyword">user</span>.setPerms(&quot;admin&quot;);<br><br>    mapper.<span class="hljs-keyword">add</span>(<span class="hljs-keyword">user</span>);<br>    <span class="hljs-type">int</span> i = <span class="hljs-number">1</span> / <span class="hljs-number">0</span>;<br>    mapper.<span class="hljs-keyword">delete</span>(<span class="hljs-number">6</span>);<br>    <span class="hljs-keyword">return</span> mapper.findAll();<br>&#125;<br><br><span class="hljs-built_in">public</span> <span class="hljs-type">int</span> <span class="hljs-keyword">add</span>(<span class="hljs-keyword">User</span> <span class="hljs-keyword">user</span>) &#123;<br>    <span class="hljs-keyword">return</span> sqlSession.getMapper(UserMapper.<span class="hljs-keyword">class</span>).<span class="hljs-keyword">add</span>(<span class="hljs-keyword">user</span>);<br>&#125;<br><br><span class="hljs-built_in">public</span> <span class="hljs-type">int</span> <span class="hljs-keyword">delete</span>(<span class="hljs-type">int</span> id) &#123;<br>    <span class="hljs-keyword">return</span> sqlSession.getMapper(UserMapper.<span class="hljs-keyword">class</span>).<span class="hljs-keyword">delete</span>(id);<br>&#125;<br><br><span class="hljs-type">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>26-7.æµ‹è¯•<br>public static void main(String[] args) {</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">ApplicationContext ac = <span class="hljs-built_in">new</span> ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);<br>UserMapper userMapper = ac.getBean(&quot;userMapper&quot;, UserMapper.<span class="hljs-keyword">class</span>);<br>List&lt;<span class="hljs-keyword">User</span>&gt; users = userMapper.findAll();<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">User</span> <span class="hljs-keyword">user</span> : users) &#123;<br>    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">user</span>);<br>&#125;<br><br><span class="hljs-type">TEXT</span><br></code></pre></td></tr></table></figure>

<p>}</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Java/" class="category-chain-item">Java</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Java/">#Java</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Spring</div>
      <div>https://lfrok.top/2022/11/27/Java/Spring/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>B612ğŸš€</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2022å¹´11æœˆ27æ—¥</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>è®¸å¯åè®®</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/11/27/Java/JavaWeb/" title="JavaWeb">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">JavaWeb</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/11/27/Java/SpringMVC/" title="SpringMVC">
                        <span class="hidden-mobile">SpringMVC</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <div id="lv-container" data-id="city" data-uid="MTAyMC8zODU3Mi8xNTEwMA==">
    <script type="text/javascript">
      Fluid.utils.loadComments('#lv-container', function() {
        Fluid.utils.createScript('https://cdn-city.livere.com/js/embed.dist.js');
      });
    </script>
    <noscript>Please enable JavaScript to view the comments</noscript>
  </div>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Fork</span></a> <strong><i style= color:red>â˜­ </i></strong> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>B-612</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
